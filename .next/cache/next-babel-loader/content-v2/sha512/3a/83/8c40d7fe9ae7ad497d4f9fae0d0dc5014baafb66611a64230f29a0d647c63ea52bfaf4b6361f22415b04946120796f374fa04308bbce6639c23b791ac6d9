{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/colechalland/Projects/ChalkCoin/pages/index.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { useRouter } from \"next/router\";\nimport { getSession } from \"next-auth/client\";\nimport { useContext, useEffect, useState, useRef } from \"react\";\nimport { Alert, Container, Col, Row } from \"react-bootstrap\";\nimport { UserContext } from \"../contexts/User.Context\";\nimport { BetContext } from \"../contexts/Bets.Context\";\nimport { SportContext } from \"../contexts/Sports.Context\";\nimport { BlockchainContext } from \"../contexts/Blockchain.Context\"; // Components\n\nimport NotificationAlert from \"react-notification-alert\";\nimport Loading from \"../components/Utility/Loading\";\nimport Banner from \"../components/Index/CryptoModern/Banner\";\nimport Features from \"../components/Index/CryptoModern/Features\";\nimport Privacy from \"../components/Index/CryptoModern/Privacy\";\nimport WalletSection from \"../components/Index/CryptoModern/WalletSection\";\nimport FaqSection from \"../components/Index/CryptoModern/FaqSection\"; // User Components\n\nimport UserCard from \"../components/Index/User/UserCard\";\nimport ExpiringBets from \"../components/Index/User/ExpiringBets\";\nimport UpcomingGames from \"../components/Index/User/UpcomingGames\";\nimport PendingTransactions from \"../components/Index/User/PendingTransactions\";\nexport default function IndexPage({\n  users\n}) {\n  const router = useRouter();\n  const currentUser = useContext(UserContext);\n  const bets = useContext(BetContext);\n  const games = useContext(SportContext);\n  const blockchain = useContext(BlockchainContext);\n  const {\n    0: expiringBets,\n    1: setExpiringBets\n  } = useState([]);\n  const {\n    0: pendingTransactions,\n    1: setPendingTransactions\n  } = useState(blockchain.pendingTransactions);\n  const {\n    0: pendingTransactionsState,\n    1: setPendingTransactionsState\n  } = useState(false);\n  const {\n    0: welcomeState,\n    1: setWelcomeState\n  } = useState(true);\n  const {\n    0: mineState,\n    1: setMineState\n  } = useState(false);\n  const notificationAlertRef = useRef(null);\n\n  const notify = errMsg => {\n    let options = {\n      place: \"tc\",\n      message: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"b\", {\n            children: errMsg\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 41,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 5\n      }, this),\n      type: \"danger\",\n      icon: \"nc-icon nc-bell-55\",\n      autoDismiss: 7\n    };\n    notificationAlertRef.current.notificationAlert(options);\n    router.replace(\"/\", undefined, {\n      shallow: true\n    });\n  };\n\n  useEffect(() => {\n    if (router.query.error) {\n      notify(router.query.error);\n    }\n  }, [router.query.error]);\n  useEffect(() => {\n    setPendingTransactions(blockchain.pendingTransactions);\n  }, [blockchain.pendingTransactions]);\n  useEffect(() => {\n    setExpiringBets(bets.pendingBets.openBets.map(sport => {\n      return sport.bets;\n    }).flat().filter(bet => bet.requesterId !== currentUser.id));\n  }, [bets.pendingBets.openBets]);\n  useEffect(() => {\n    if (blockchain.initialized) setPendingTransactionsState(true);\n    if (pendingTransactions.length >= 10) setMineState(true);else setMineState(false);\n  }, [pendingTransactions]);\n  let welcomeAlert, mineAlert;\n\n  if (welcomeState) {\n    welcomeAlert = /*#__PURE__*/_jsxDEV(Alert, {\n      className: \"alert-with-icon\",\n      variant: \"primary\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        \"aria-hidden\": true,\n        className: \"close\",\n        \"data-dismiss\": \"alert\",\n        type: \"button\",\n        onClick: () => {\n          setWelcomeState(false);\n        },\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"nc-icon nc-simple-remove\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        \"data-notify\": \"icon\",\n        className: \"nc-icon nc-bell-55\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        \"data-notify\": \"message\",\n        children: \"Please keep in mind that this is a personal project and has no company backing it.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 4\n    }, this);\n  }\n\n  if (mineState) {\n    mineAlert = /*#__PURE__*/_jsxDEV(Alert, {\n      className: \"alert-with-icon\",\n      variant: \"success\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        \"aria-hidden\": true,\n        className: \"close\",\n        \"data-dismiss\": \"alert\",\n        type: \"button\",\n        onClick: () => {\n          setMineState(false);\n        },\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"nc-icon nc-simple-remove\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        \"data-notify\": \"icon\",\n        className: \"nc-icon nc-bell-55\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        \"data-notify\": \"message\",\n        children: \"There's enough pending transactions to be mined.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 4\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rna-container\",\n      children: /*#__PURE__*/_jsxDEV(NotificationAlert, {\n        ref: notificationAlertRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      fluid: true,\n      children: currentUser.id ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Row, {\n          children: /*#__PURE__*/_jsxDEV(Col, {\n            children: welcomeAlert\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 8\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          children: /*#__PURE__*/_jsxDEV(Col, {\n            children: mineAlert\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 8\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          children: [/*#__PURE__*/_jsxDEV(UserCard, {\n            user: currentUser,\n            bets: bets.userBets\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(ExpiringBets, {\n            user: currentUser,\n            bets: expiringBets,\n            loaded: bets.initialized\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(UpcomingGames, {\n            games: games.map(sport => {\n              var _sport$data$events;\n\n              return (_sport$data$events = sport.data.events) === null || _sport$data$events === void 0 ? void 0 : _sport$data$events.map(event => {\n                return _objectSpread(_objectSpread({}, event), {}, {\n                  sport: sport.display_name\n                });\n              });\n            }).flat().filter(event => (event === null || event === void 0 ? void 0 : event.status.type.state) === \"pre\"),\n            currentUser: currentUser,\n            users: users\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(PendingTransactions, {\n            pendingTransactions: pendingTransactions,\n            mineState: mineState,\n            user: currentUser,\n            loaded: pendingTransactionsState\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Banner, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(Features, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(Privacy, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(FaqSection, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n}\nexport async function getServerSideProps(context) {\n  const {\n    req,\n    res\n  } = context;\n  const session = await getSession({\n    req\n  });\n  let users = [];\n\n  if (session) {\n    users = await prisma.user.findMany();\n    users = users.map(user => {\n      delete user.password;\n      delete user.balance;\n      delete user.paypal;\n      delete user.emailVerified;\n      delete user.createdAt;\n      delete user.updatedAt;\n      return user;\n    }).filter(user => {\n      return user.id !== session.user.id;\n    });\n  }\n\n  return {\n    props: {\n      users\n    }\n  };\n}","map":{"version":3,"sources":["/Users/colechalland/Projects/ChalkCoin/pages/index.js"],"names":["useRouter","getSession","useContext","useEffect","useState","useRef","Alert","Container","Col","Row","UserContext","BetContext","SportContext","BlockchainContext","NotificationAlert","Loading","Banner","Features","Privacy","WalletSection","FaqSection","UserCard","ExpiringBets","UpcomingGames","PendingTransactions","IndexPage","users","router","currentUser","bets","games","blockchain","expiringBets","setExpiringBets","pendingTransactions","setPendingTransactions","pendingTransactionsState","setPendingTransactionsState","welcomeState","setWelcomeState","mineState","setMineState","notificationAlertRef","notify","errMsg","options","place","message","type","icon","autoDismiss","current","notificationAlert","replace","undefined","shallow","query","error","pendingBets","openBets","map","sport","flat","filter","bet","requesterId","id","initialized","length","welcomeAlert","mineAlert","userBets","data","events","event","display_name","status","state","getServerSideProps","context","req","res","session","prisma","user","findMany","password","balance","paypal","emailVerified","createdAt","updatedAt","props"],"mappings":";;;;;;;;;;AAAA,SAASA,SAAT,QAA0B,aAA1B;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,UAAT,EAAqBC,SAArB,EAAgCC,QAAhC,EAA0CC,MAA1C,QAAwD,OAAxD;AACA,SAASC,KAAT,EAAgBC,SAAhB,EAA2BC,GAA3B,EAAgCC,GAAhC,QAA2C,iBAA3C;AACA,SAASC,WAAT,QAA4B,0BAA5B;AACA,SAASC,UAAT,QAA2B,0BAA3B;AACA,SAASC,YAAT,QAA6B,4BAA7B;AACA,SAASC,iBAAT,QAAkC,gCAAlC,C,CACA;;AACA,OAAOC,iBAAP,MAA8B,0BAA9B;AACA,OAAOC,OAAP,MAAoB,+BAApB;AACA,OAAOC,MAAP,MAAmB,yCAAnB;AACA,OAAOC,QAAP,MAAqB,2CAArB;AACA,OAAOC,OAAP,MAAoB,0CAApB;AACA,OAAOC,aAAP,MAA0B,gDAA1B;AACA,OAAOC,UAAP,MAAuB,6CAAvB,C,CACA;;AACA,OAAOC,QAAP,MAAqB,mCAArB;AACA,OAAOC,YAAP,MAAyB,uCAAzB;AACA,OAAOC,aAAP,MAA0B,wCAA1B;AACA,OAAOC,mBAAP,MAAgC,8CAAhC;AAEA,eAAe,SAASC,SAAT,CAAmB;AAAEC,EAAAA;AAAF,CAAnB,EAA8B;AAC5C,QAAMC,MAAM,GAAG3B,SAAS,EAAxB;AACA,QAAM4B,WAAW,GAAG1B,UAAU,CAACQ,WAAD,CAA9B;AACA,QAAMmB,IAAI,GAAG3B,UAAU,CAACS,UAAD,CAAvB;AACA,QAAMmB,KAAK,GAAG5B,UAAU,CAACU,YAAD,CAAxB;AACA,QAAMmB,UAAU,GAAG7B,UAAU,CAACW,iBAAD,CAA7B;AACA,QAAM;AAAA,OAACmB,YAAD;AAAA,OAAeC;AAAf,MAAkC7B,QAAQ,CAAC,EAAD,CAAhD;AACA,QAAM;AAAA,OAAC8B,mBAAD;AAAA,OAAsBC;AAAtB,MAAgD/B,QAAQ,CAAC2B,UAAU,CAACG,mBAAZ,CAA9D;AACA,QAAM;AAAA,OAACE,wBAAD;AAAA,OAA2BC;AAA3B,MAA0DjC,QAAQ,CAAC,KAAD,CAAxE;AACA,QAAM;AAAA,OAACkC,YAAD;AAAA,OAAeC;AAAf,MAAkCnC,QAAQ,CAAC,IAAD,CAAhD;AACA,QAAM;AAAA,OAACoC,SAAD;AAAA,OAAYC;AAAZ,MAA4BrC,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAMsC,oBAAoB,GAAGrC,MAAM,CAAC,IAAD,CAAnC;;AACA,QAAMsC,MAAM,GAAIC,MAAD,IAAY;AAC1B,QAAIC,OAAO,GAAG;AACbC,MAAAA,KAAK,EAAE,IADM;AAEbC,MAAAA,OAAO,eACN;AAAA,+BACC;AAAA,iCACC;AAAA,sBAAIH;AAAJ;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,cAHY;AASbI,MAAAA,IAAI,EAAE,QATO;AAUbC,MAAAA,IAAI,EAAE,oBAVO;AAWbC,MAAAA,WAAW,EAAE;AAXA,KAAd;AAaAR,IAAAA,oBAAoB,CAACS,OAArB,CAA6BC,iBAA7B,CAA+CP,OAA/C;AACAlB,IAAAA,MAAM,CAAC0B,OAAP,CAAe,GAAf,EAAoBC,SAApB,EAA+B;AAAEC,MAAAA,OAAO,EAAE;AAAX,KAA/B;AACA,GAhBD;;AAkBApD,EAAAA,SAAS,CAAC,MAAM;AACf,QAAIwB,MAAM,CAAC6B,KAAP,CAAaC,KAAjB,EAAwB;AACvBd,MAAAA,MAAM,CAAChB,MAAM,CAAC6B,KAAP,CAAaC,KAAd,CAAN;AACA;AACD,GAJQ,EAIN,CAAC9B,MAAM,CAAC6B,KAAP,CAAaC,KAAd,CAJM,CAAT;AAMAtD,EAAAA,SAAS,CAAC,MAAM;AACfgC,IAAAA,sBAAsB,CAACJ,UAAU,CAACG,mBAAZ,CAAtB;AACA,GAFQ,EAEN,CAACH,UAAU,CAACG,mBAAZ,CAFM,CAAT;AAIA/B,EAAAA,SAAS,CAAC,MAAM;AACf8B,IAAAA,eAAe,CACdJ,IAAI,CAAC6B,WAAL,CAAiBC,QAAjB,CACEC,GADF,CACOC,KAAD,IAAW;AACf,aAAOA,KAAK,CAAChC,IAAb;AACA,KAHF,EAIEiC,IAJF,GAKEC,MALF,CAKUC,GAAD,IAASA,GAAG,CAACC,WAAJ,KAAoBrC,WAAW,CAACsC,EALlD,CADc,CAAf;AAQA,GATQ,EASN,CAACrC,IAAI,CAAC6B,WAAL,CAAiBC,QAAlB,CATM,CAAT;AAWAxD,EAAAA,SAAS,CAAC,MAAM;AACf,QAAI4B,UAAU,CAACoC,WAAf,EAA4B9B,2BAA2B,CAAC,IAAD,CAA3B;AAC5B,QAAIH,mBAAmB,CAACkC,MAApB,IAA8B,EAAlC,EAAsC3B,YAAY,CAAC,IAAD,CAAZ,CAAtC,KACKA,YAAY,CAAC,KAAD,CAAZ;AACL,GAJQ,EAIN,CAACP,mBAAD,CAJM,CAAT;AAMA,MAAImC,YAAJ,EAAkBC,SAAlB;;AACA,MAAIhC,YAAJ,EAAkB;AACjB+B,IAAAA,YAAY,gBACX,QAAC,KAAD;AAAO,MAAA,SAAS,EAAC,iBAAjB;AAAmC,MAAA,OAAO,EAAC,SAA3C;AAAA,8BACC;AACC,uBAAa,IADd;AAEC,QAAA,SAAS,EAAC,OAFX;AAGC,wBAAa,OAHd;AAIC,QAAA,IAAI,EAAC,QAJN;AAKC,QAAA,OAAO,EAAE,MAAM;AACd9B,UAAAA,eAAe,CAAC,KAAD,CAAf;AACA,SAPF;AAAA,+BASC;AAAG,UAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA;AATD;AAAA;AAAA;AAAA;AAAA,cADD,eAYC;AAAM,uBAAY,MAAlB;AAAyB,QAAA,SAAS,EAAC;AAAnC;AAAA;AAAA;AAAA;AAAA,cAZD,eAaC;AAAM,uBAAY,SAAlB;AAAA,kBACE;AADF;AAAA;AAAA;AAAA;AAAA,cAbD;AAAA;AAAA;AAAA;AAAA;AAAA,YADD;AAmBA;;AACD,MAAIC,SAAJ,EAAe;AACd8B,IAAAA,SAAS,gBACR,QAAC,KAAD;AAAO,MAAA,SAAS,EAAC,iBAAjB;AAAmC,MAAA,OAAO,EAAC,SAA3C;AAAA,8BACC;AACC,uBAAa,IADd;AAEC,QAAA,SAAS,EAAC,OAFX;AAGC,wBAAa,OAHd;AAIC,QAAA,IAAI,EAAC,QAJN;AAKC,QAAA,OAAO,EAAE,MAAM;AACd7B,UAAAA,YAAY,CAAC,KAAD,CAAZ;AACA,SAPF;AAAA,+BASC;AAAG,UAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA;AATD;AAAA;AAAA;AAAA;AAAA,cADD,eAYC;AAAM,uBAAY,MAAlB;AAAyB,QAAA,SAAS,EAAC;AAAnC;AAAA;AAAA;AAAA;AAAA,cAZD,eAaC;AAAM,uBAAY,SAAlB;AAAA,kBAA6B;AAA7B;AAAA;AAAA;AAAA;AAAA,cAbD;AAAA;AAAA;AAAA;AAAA;AAAA,YADD;AAiBA;;AAED,sBACC;AAAA,4BACC;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA,6BACC,QAAC,iBAAD;AAAmB,QAAA,GAAG,EAAEC;AAAxB;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,YADD,eAIC,QAAC,SAAD;AAAW,MAAA,KAAK,MAAhB;AAAA,gBACEd,WAAW,CAACsC,EAAZ,gBACA;AAAA,gCACC,QAAC,GAAD;AAAA,iCACC,QAAC,GAAD;AAAA,sBAAMG;AAAN;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,gBADD,eAIC,QAAC,GAAD;AAAA,iCACC,QAAC,GAAD;AAAA,sBAAMC;AAAN;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,gBAJD,eAOC,QAAC,GAAD;AAAA,kCACC,QAAC,QAAD;AAAU,YAAA,IAAI,EAAE1C,WAAhB;AAA6B,YAAA,IAAI,EAAEC,IAAI,CAAC0C;AAAxC;AAAA;AAAA;AAAA;AAAA,kBADD,eAEC,QAAC,YAAD;AAAc,YAAA,IAAI,EAAE3C,WAApB;AAAiC,YAAA,IAAI,EAAEI,YAAvC;AAAqD,YAAA,MAAM,EAAEH,IAAI,CAACsC;AAAlE;AAAA;AAAA;AAAA;AAAA,kBAFD,eAGC,QAAC,aAAD;AACC,YAAA,KAAK,EAAErC,KAAK,CACV8B,GADK,CACAC,KAAD,IAAW;AAAA;;AACf,2CAAOA,KAAK,CAACW,IAAN,CAAWC,MAAlB,uDAAO,mBAAmBb,GAAnB,CAAwBc,KAAD,IAAW;AACxC,uDAAYA,KAAZ;AAAmBb,kBAAAA,KAAK,EAAEA,KAAK,CAACc;AAAhC;AACA,eAFM,CAAP;AAGA,aALK,EAMLb,IANK,GAOLC,MAPK,CAOGW,KAAD,IAAW,CAAAA,KAAK,SAAL,IAAAA,KAAK,WAAL,YAAAA,KAAK,CAAEE,MAAP,CAAc5B,IAAd,CAAmB6B,KAAnB,MAA6B,KAP1C,CADR;AASC,YAAA,WAAW,EAAEjD,WATd;AAUC,YAAA,KAAK,EAAEF;AAVR;AAAA;AAAA;AAAA;AAAA,kBAHD,eAeC,QAAC,mBAAD;AACC,YAAA,mBAAmB,EAAEQ,mBADtB;AAEC,YAAA,SAAS,EAAEM,SAFZ;AAGC,YAAA,IAAI,EAAEZ,WAHP;AAIC,YAAA,MAAM,EAAEQ;AAJT;AAAA;AAAA;AAAA;AAAA,kBAfD;AAAA;AAAA;AAAA;AAAA;AAAA,gBAPD;AAAA,sBADA,gBAgCA;AAAA,gCACC,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA,gBADD,eAEC,QAAC,QAAD;AAAA;AAAA;AAAA;AAAA,gBAFD,eAGC,QAAC,OAAD;AAAA;AAAA;AAAA;AAAA,gBAHD,eAKC,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA,gBALD;AAAA;AAjCF;AAAA;AAAA;AAAA;AAAA,YAJD;AAAA,kBADD;AAiDA;AAED,OAAO,eAAe0C,kBAAf,CAAkCC,OAAlC,EAA2C;AACjD,QAAM;AAAEC,IAAAA,GAAF;AAAOC,IAAAA;AAAP,MAAeF,OAArB;AACA,QAAMG,OAAO,GAAG,MAAMjF,UAAU,CAAC;AAAE+E,IAAAA;AAAF,GAAD,CAAhC;AACA,MAAItD,KAAK,GAAG,EAAZ;;AACA,MAAIwD,OAAJ,EAAa;AACZxD,IAAAA,KAAK,GAAG,MAAMyD,MAAM,CAACC,IAAP,CAAYC,QAAZ,EAAd;AACA3D,IAAAA,KAAK,GAAGA,KAAK,CACXkC,GADM,CACDwB,IAAD,IAAU;AACd,aAAOA,IAAI,CAACE,QAAZ;AACA,aAAOF,IAAI,CAACG,OAAZ;AACA,aAAOH,IAAI,CAACI,MAAZ;AACA,aAAOJ,IAAI,CAACK,aAAZ;AACA,aAAOL,IAAI,CAACM,SAAZ;AACA,aAAON,IAAI,CAACO,SAAZ;AAEA,aAAOP,IAAP;AACA,KAVM,EAWNrB,MAXM,CAWEqB,IAAD,IAAU;AACjB,aAAOA,IAAI,CAAClB,EAAL,KAAYgB,OAAO,CAACE,IAAR,CAAalB,EAAhC;AACA,KAbM,CAAR;AAcA;;AAED,SAAO;AACN0B,IAAAA,KAAK,EAAE;AAAElE,MAAAA;AAAF;AADD,GAAP;AAGA","sourcesContent":["import { useRouter } from \"next/router\";\nimport { getSession } from \"next-auth/client\";\nimport { useContext, useEffect, useState, useRef } from \"react\";\nimport { Alert, Container, Col, Row } from \"react-bootstrap\";\nimport { UserContext } from \"../contexts/User.Context\";\nimport { BetContext } from \"../contexts/Bets.Context\";\nimport { SportContext } from \"../contexts/Sports.Context\";\nimport { BlockchainContext } from \"../contexts/Blockchain.Context\";\n// Components\nimport NotificationAlert from \"react-notification-alert\";\nimport Loading from \"../components/Utility/Loading\";\nimport Banner from \"../components/Index/CryptoModern/Banner\";\nimport Features from \"../components/Index/CryptoModern/Features\";\nimport Privacy from \"../components/Index/CryptoModern/Privacy\";\nimport WalletSection from \"../components/Index/CryptoModern/WalletSection\";\nimport FaqSection from \"../components/Index/CryptoModern/FaqSection\";\n// User Components\nimport UserCard from \"../components/Index/User/UserCard\";\nimport ExpiringBets from \"../components/Index/User/ExpiringBets\";\nimport UpcomingGames from \"../components/Index/User/UpcomingGames\";\nimport PendingTransactions from \"../components/Index/User/PendingTransactions\";\n\nexport default function IndexPage({ users }) {\n\tconst router = useRouter();\n\tconst currentUser = useContext(UserContext);\n\tconst bets = useContext(BetContext);\n\tconst games = useContext(SportContext);\n\tconst blockchain = useContext(BlockchainContext);\n\tconst [expiringBets, setExpiringBets] = useState([]);\n\tconst [pendingTransactions, setPendingTransactions] = useState(blockchain.pendingTransactions);\n\tconst [pendingTransactionsState, setPendingTransactionsState] = useState(false);\n\tconst [welcomeState, setWelcomeState] = useState(true);\n\tconst [mineState, setMineState] = useState(false);\n\tconst notificationAlertRef = useRef(null);\n\tconst notify = (errMsg) => {\n\t\tlet options = {\n\t\t\tplace: \"tc\",\n\t\t\tmessage: (\n\t\t\t\t<div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<b>{errMsg}</b>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t),\n\t\t\ttype: \"danger\",\n\t\t\ticon: \"nc-icon nc-bell-55\",\n\t\t\tautoDismiss: 7,\n\t\t};\n\t\tnotificationAlertRef.current.notificationAlert(options);\n\t\trouter.replace(\"/\", undefined, { shallow: true });\n\t};\n\n\tuseEffect(() => {\n\t\tif (router.query.error) {\n\t\t\tnotify(router.query.error);\n\t\t}\n\t}, [router.query.error]);\n\n\tuseEffect(() => {\n\t\tsetPendingTransactions(blockchain.pendingTransactions);\n\t}, [blockchain.pendingTransactions]);\n\n\tuseEffect(() => {\n\t\tsetExpiringBets(\n\t\t\tbets.pendingBets.openBets\n\t\t\t\t.map((sport) => {\n\t\t\t\t\treturn sport.bets;\n\t\t\t\t})\n\t\t\t\t.flat()\n\t\t\t\t.filter((bet) => bet.requesterId !== currentUser.id)\n\t\t);\n\t}, [bets.pendingBets.openBets]);\n\n\tuseEffect(() => {\n\t\tif (blockchain.initialized) setPendingTransactionsState(true);\n\t\tif (pendingTransactions.length >= 10) setMineState(true);\n\t\telse setMineState(false);\n\t}, [pendingTransactions]);\n\n\tlet welcomeAlert, mineAlert;\n\tif (welcomeState) {\n\t\twelcomeAlert = (\n\t\t\t<Alert className=\"alert-with-icon\" variant=\"primary\">\n\t\t\t\t<button\n\t\t\t\t\taria-hidden={true}\n\t\t\t\t\tclassName=\"close\"\n\t\t\t\t\tdata-dismiss=\"alert\"\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tsetWelcomeState(false);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<i className=\"nc-icon nc-simple-remove\"></i>\n\t\t\t\t</button>\n\t\t\t\t<span data-notify=\"icon\" className=\"nc-icon nc-bell-55\"></span>\n\t\t\t\t<span data-notify=\"message\">\n\t\t\t\t\t{\"Please keep in mind that this is a personal project and has no company backing it.\"}\n\t\t\t\t</span>\n\t\t\t</Alert>\n\t\t);\n\t}\n\tif (mineState) {\n\t\tmineAlert = (\n\t\t\t<Alert className=\"alert-with-icon\" variant=\"success\">\n\t\t\t\t<button\n\t\t\t\t\taria-hidden={true}\n\t\t\t\t\tclassName=\"close\"\n\t\t\t\t\tdata-dismiss=\"alert\"\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tsetMineState(false);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<i className=\"nc-icon nc-simple-remove\"></i>\n\t\t\t\t</button>\n\t\t\t\t<span data-notify=\"icon\" className=\"nc-icon nc-bell-55\"></span>\n\t\t\t\t<span data-notify=\"message\">{\"There's enough pending transactions to be mined.\"}</span>\n\t\t\t</Alert>\n\t\t);\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"rna-container\">\n\t\t\t\t<NotificationAlert ref={notificationAlertRef} />\n\t\t\t</div>\n\t\t\t<Container fluid>\n\t\t\t\t{currentUser.id ? (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col>{welcomeAlert}</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col>{mineAlert}</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<UserCard user={currentUser} bets={bets.userBets} />\n\t\t\t\t\t\t\t<ExpiringBets user={currentUser} bets={expiringBets} loaded={bets.initialized} />\n\t\t\t\t\t\t\t<UpcomingGames\n\t\t\t\t\t\t\t\tgames={games\n\t\t\t\t\t\t\t\t\t.map((sport) => {\n\t\t\t\t\t\t\t\t\t\treturn sport.data.events?.map((event) => {\n\t\t\t\t\t\t\t\t\t\t\treturn { ...event, sport: sport.display_name };\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t.flat()\n\t\t\t\t\t\t\t\t\t.filter((event) => event?.status.type.state === \"pre\")}\n\t\t\t\t\t\t\t\tcurrentUser={currentUser}\n\t\t\t\t\t\t\t\tusers={users}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<PendingTransactions\n\t\t\t\t\t\t\t\tpendingTransactions={pendingTransactions}\n\t\t\t\t\t\t\t\tmineState={mineState}\n\t\t\t\t\t\t\t\tuser={currentUser}\n\t\t\t\t\t\t\t\tloaded={pendingTransactionsState}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</>\n\t\t\t\t) : (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Banner />\n\t\t\t\t\t\t<Features />\n\t\t\t\t\t\t<Privacy />\n\t\t\t\t\t\t{/* <WalletSection /> */}\n\t\t\t\t\t\t<FaqSection />\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</Container>\n\t\t</>\n\t);\n}\n\nexport async function getServerSideProps(context) {\n\tconst { req, res } = context;\n\tconst session = await getSession({ req });\n\tlet users = [];\n\tif (session) {\n\t\tusers = await prisma.user.findMany();\n\t\tusers = users\n\t\t\t.map((user) => {\n\t\t\t\tdelete user.password;\n\t\t\t\tdelete user.balance;\n\t\t\t\tdelete user.paypal;\n\t\t\t\tdelete user.emailVerified;\n\t\t\t\tdelete user.createdAt;\n\t\t\t\tdelete user.updatedAt;\n\n\t\t\t\treturn user;\n\t\t\t})\n\t\t\t.filter((user) => {\n\t\t\t\treturn user.id !== session.user.id;\n\t\t\t});\n\t}\n\n\treturn {\n\t\tprops: { users },\n\t};\n}\n"]},"metadata":{},"sourceType":"module"}