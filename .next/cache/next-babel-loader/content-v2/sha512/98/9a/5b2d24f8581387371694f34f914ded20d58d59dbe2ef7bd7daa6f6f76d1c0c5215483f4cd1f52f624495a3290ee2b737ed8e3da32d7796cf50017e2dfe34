{"ast":null,"code":"import _regeneratorRuntime from \"/Users/colechalland/Projects/ChalkCoin/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _defineProperty from \"/Users/colechalland/Projects/ChalkCoin/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"/Users/colechalland/Projects/ChalkCoin/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _asyncToGenerator from \"/Users/colechalland/Projects/ChalkCoin/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport axios from \"axios\";\nvar leagues = [{\n  abbrv: \"NCAAF\",\n  sport: \"football\",\n  display_name: \"NCAA Football\",\n  league_name: \"college-football\",\n  data: []\n}, {\n  abbrv: \"NFL\",\n  sport: \"football\",\n  display_name: \"NFL\",\n  league_name: \"nfl\",\n  data: []\n}, {\n  abbrv: \"MLB\",\n  sport: \"baseball\",\n  display_name: \"MLB\",\n  league_name: \"mlb\",\n  data: []\n}, {\n  abbrv: \"NBA\",\n  sport: \"basketball\",\n  display_name: \"NBA\",\n  league_name: \"nba\",\n  data: []\n}, {\n  abbrv: \"NCAAB\",\n  sport: \"basketball\",\n  display_name: \"NCAA Men's Basketball\",\n  league_name: \"mens-college-basketball\",\n  data: []\n}, {\n  abbrv: \"NHL\",\n  sport: \"hockey\",\n  display_name: \"NHL\",\n  league_name: \"nhl\",\n  data: []\n}, {\n  abbrv: \"WNBA\",\n  sport: \"basketball\",\n  display_name: \"WNBA\",\n  league_name: \"wnba\",\n  data: []\n} // { abbrv: \"MLS\", sport: \"soccer\", display_name: \"MLS\", league_name: \"MLS\", data: [] },\n];\nexport function EventFinder(_x) {\n  return _EventFinder.apply(this, arguments);\n}\n_c2 = EventFinder;\n\nfunction _EventFinder() {\n  _EventFinder = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(transaction) {\n    var _event, _event2, _event3;\n\n    var now, date, timeDiff, yyyymmdd, leagueIndex, event, openStatus, response, _response;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            now = new Date();\n            date = new Date(transaction.details.date);\n            timeDiff = (date.getTime() - now.getTime()) / (3600 * 1000);\n            yyyymmdd = date.yyyymmdd();\n            leagueIndex = leagues.findIndex(function (league) {\n              return league.display_name === transaction.details.sport;\n            });\n\n            if (!leagues[leagueIndex].data.some(function (event) {\n              return event.id === transaction.details.gameId;\n            })) {\n              _context.next = 9;\n              break;\n            }\n\n            event = leagues[leagueIndex].data.find(function (event) {\n              return event.id === transaction.details.gameId;\n            });\n            _context.next = 14;\n            break;\n\n          case 9:\n            _context.next = 11;\n            return axios.get(\"http://site.api.espn.com/apis/site/v2/sports/\".concat(leagues[leagueIndex].sport, \"/\").concat(leagues[leagueIndex].league_name, \"/scoreboard?dates=\").concat(yyyymmdd));\n\n          case 11:\n            response = _context.sent;\n            leagues[leagueIndex].data = [].concat(_toConsumableArray(leagues[leagueIndex].data), _toConsumableArray(response.data.events));\n            event = response.data.events.find(function (event) {\n              return event.id === transaction.details.gameId;\n            });\n\n          case 14:\n            if (event) {\n              _context.next = 20;\n              break;\n            }\n\n            _context.next = 17;\n            return axios.get(\"http://site.api.espn.com/apis/site/v2/sports/\".concat(leagues[leagueIndex].sport, \"/\").concat(leagues[leagueIndex].league_name, \"/scoreboard/\").concat(bet.details.gameId));\n\n          case 17:\n            _response = _context.sent;\n            leagues[leagueIndex].data = [].concat(_toConsumableArray(leagues[leagueIndex].data), [_response.data]);\n            event = _response.data;\n\n          case 20:\n            if (((_event = event) === null || _event === void 0 ? void 0 : _event.status.type.name) === \"STATUS_FINAL\") {\n              openStatus = \"Ended\";\n            } else if (((_event2 = event) === null || _event2 === void 0 ? void 0 : _event2.status.type.state) === \"in\") {\n              openStatus = event.status.period <= 1 ? \"danger\" : \"Closed\";\n            } else if (((_event3 = event) === null || _event3 === void 0 ? void 0 : _event3.status.type.state) === \"pre\") {\n              if (date.getDate() === now.getDate() && date.getMonth() === now.getMonth()) {\n                openStatus = timeDiff <= 2 ? \"warning\" : \"info\";\n              }\n            }\n\n            return _context.abrupt(\"return\", _objectSpread(_objectSpread({}, transaction), {}, {\n              event: event,\n              openStatus: openStatus\n            }));\n\n          case 22:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _EventFinder.apply(this, arguments);\n}\n\n_c = EventFinder;\nexport function EventsFinder(_x2, _x3) {\n  return _EventsFinder.apply(this, arguments);\n}\n_c4 = EventsFinder;\n\nfunction _EventsFinder() {\n  _EventsFinder = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(transactions, type) {\n    var bets;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            bets = type === \"league\" ? transactions.bets : transactions;\n            _context3.prev = 1;\n            _context3.next = 4;\n            return Promise.all(bets.map( /*#__PURE__*/function () {\n              var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(bet) {\n                var _event4, _event5, _event6, now, date, timeDiff, yyyymmdd, leagueIndex, event, openStatus, response, _response2;\n\n                return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                  while (1) {\n                    switch (_context2.prev = _context2.next) {\n                      case 0:\n                        if (!(bet.details.type === \"Mine Reward\")) {\n                          _context2.next = 4;\n                          break;\n                        }\n\n                        return _context2.abrupt(\"return\", bet);\n\n                      case 4:\n                        now = new Date();\n                        date = new Date(bet.details.date);\n                        timeDiff = (date.getTime() - now.getTime()) / (3600 * 1000);\n                        yyyymmdd = date.yyyymmdd();\n                        leagueIndex = leagues.findIndex(function (league) {\n                          return league.display_name === bet.details.sport;\n                        });\n\n                        if (!leagues[leagueIndex].data.some(function (event) {\n                          return event.id === bet.details.gameId;\n                        })) {\n                          _context2.next = 13;\n                          break;\n                        }\n\n                        event = leagues[leagueIndex].data.find(function (event) {\n                          return event.id === bet.details.gameId;\n                        });\n                        _context2.next = 18;\n                        break;\n\n                      case 13:\n                        _context2.next = 15;\n                        return axios.get(\"http://site.api.espn.com/apis/site/v2/sports/\".concat(leagues[leagueIndex].sport, \"/\").concat(leagues[leagueIndex].league_name, \"/scoreboard?dates=\").concat(yyyymmdd));\n\n                      case 15:\n                        response = _context2.sent;\n                        leagues[leagueIndex].data = [].concat(_toConsumableArray(leagues[leagueIndex].data), _toConsumableArray(response.data.events));\n                        event = response.data.events.find(function (event) {\n                          return event.id === bet.details.gameId;\n                        });\n\n                      case 18:\n                        if (event) {\n                          _context2.next = 24;\n                          break;\n                        }\n\n                        _context2.next = 21;\n                        return axios.get(\"http://site.api.espn.com/apis/site/v2/sports/\".concat(leagues[leagueIndex].sport, \"/\").concat(leagues[leagueIndex].league_name, \"/scoreboard/\").concat(bet.details.gameId));\n\n                      case 21:\n                        _response2 = _context2.sent;\n                        leagues[leagueIndex].data = [].concat(_toConsumableArray(leagues[leagueIndex].data), [_response2.data]);\n                        event = _response2.data;\n\n                      case 24:\n                        if (((_event4 = event) === null || _event4 === void 0 ? void 0 : _event4.status.type.name) === \"STATUS_FINAL\") {\n                          openStatus = \"Ended\";\n                        } else if (((_event5 = event) === null || _event5 === void 0 ? void 0 : _event5.status.type.state) === \"in\") {\n                          openStatus = event.status.period <= 1 ? \"danger\" : \"Closed\";\n                        } else if (((_event6 = event) === null || _event6 === void 0 ? void 0 : _event6.status.type.state) === \"pre\") {\n                          if (date.getDate() === now.getDate() && date.getMonth() === now.getMonth()) {\n                            openStatus = timeDiff <= 2 ? \"warning\" : \"info\";\n                          }\n                        }\n\n                        return _context2.abrupt(\"return\", _objectSpread(_objectSpread({}, bet), {}, {\n                          event: event,\n                          openStatus: openStatus\n                        }));\n\n                      case 26:\n                      case \"end\":\n                        return _context2.stop();\n                    }\n                  }\n                }, _callee2);\n              }));\n\n              return function (_x4) {\n                return _ref.apply(this, arguments);\n              };\n            }()));\n\n          case 4:\n            bets = _context3.sent;\n            _context3.next = 10;\n            break;\n\n          case 7:\n            _context3.prev = 7;\n            _context3.t0 = _context3[\"catch\"](1);\n            console.log(_context3.t0.message);\n\n          case 10:\n            return _context3.abrupt(\"return\", type === \"league\" ? _objectSpread(_objectSpread({}, transactions), {}, {\n              bets: bets\n            }) : bets);\n\n          case 11:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3, null, [[1, 7]]);\n  }));\n  return _EventsFinder.apply(this, arguments);\n}\n\n_c3 = EventsFinder;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"EventFinder\");\n$RefreshReg$(_c2, \"EventFinder\");\n$RefreshReg$(_c3, \"EventsFinder\");\n$RefreshReg$(_c4, \"EventsFinder\");","map":{"version":3,"sources":["/Users/colechalland/Projects/ChalkCoin/helpers/EventsHelper.js"],"names":["axios","leagues","abbrv","sport","display_name","league_name","data","EventFinder","transaction","now","Date","date","details","timeDiff","getTime","yyyymmdd","leagueIndex","findIndex","league","some","event","id","gameId","find","get","response","events","bet","status","type","name","openStatus","state","period","getDate","getMonth","EventsFinder","transactions","bets","Promise","all","map","console","log","message"],"mappings":"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","sourcesContent":["import axios from \"axios\";\n\nlet leagues = [\n\t{\n\t\tabbrv: \"NCAAF\",\n\t\tsport: \"football\",\n\t\tdisplay_name: \"NCAA Football\",\n\t\tleague_name: \"college-football\",\n\t\tdata: [],\n\t},\n\t{\n\t\tabbrv: \"NFL\",\n\t\tsport: \"football\",\n\t\tdisplay_name: \"NFL\",\n\t\tleague_name: \"nfl\",\n\t\tdata: [],\n\t},\n\t{\n\t\tabbrv: \"MLB\",\n\t\tsport: \"baseball\",\n\t\tdisplay_name: \"MLB\",\n\t\tleague_name: \"mlb\",\n\t\tdata: [],\n\t},\n\t{\n\t\tabbrv: \"NBA\",\n\t\tsport: \"basketball\",\n\t\tdisplay_name: \"NBA\",\n\t\tleague_name: \"nba\",\n\t\tdata: [],\n\t},\n\t{\n\t\tabbrv: \"NCAAB\",\n\t\tsport: \"basketball\",\n\t\tdisplay_name: \"NCAA Men's Basketball\",\n\t\tleague_name: \"mens-college-basketball\",\n\t\tdata: [],\n\t},\n\t{\n\t\tabbrv: \"NHL\",\n\t\tsport: \"hockey\",\n\t\tdisplay_name: \"NHL\",\n\t\tleague_name: \"nhl\",\n\t\tdata: [],\n\t},\n\t{\n\t\tabbrv: \"WNBA\",\n\t\tsport: \"basketball\",\n\t\tdisplay_name: \"WNBA\",\n\t\tleague_name: \"wnba\",\n\t\tdata: [],\n\t},\n\t// { abbrv: \"MLS\", sport: \"soccer\", display_name: \"MLS\", league_name: \"MLS\", data: [] },\n];\n\nexport async function EventFinder(transaction) {\n\tconst now = new Date();\n\tconst date = new Date(transaction.details.date);\n\tconst timeDiff = (date.getTime() - now.getTime()) / (3600 * 1000);\n\tconst yyyymmdd = date.yyyymmdd();\n\tconst leagueIndex = leagues.findIndex((league) => league.display_name === transaction.details.sport);\n\tlet event, openStatus;\n\tif (leagues[leagueIndex].data.some((event) => event.id === transaction.details.gameId)) {\n\t\tevent = leagues[leagueIndex].data.find((event) => event.id === transaction.details.gameId);\n\t} else {\n\t\tconst response = await axios.get(\n\t\t\t`http://site.api.espn.com/apis/site/v2/sports/${leagues[leagueIndex].sport}/${leagues[leagueIndex].league_name}/scoreboard?dates=${yyyymmdd}`\n\t\t);\n\t\tleagues[leagueIndex].data = [...leagues[leagueIndex].data, ...response.data.events];\n\t\tevent = response.data.events.find((event) => event.id === transaction.details.gameId);\n\t}\n\n\tif (!event) {\n\t\tconst response = await axios.get(\n\t\t\t`http://site.api.espn.com/apis/site/v2/sports/${leagues[leagueIndex].sport}/${leagues[leagueIndex].league_name}/scoreboard/${bet.details.gameId}`\n\t\t);\n\t\tleagues[leagueIndex].data = [...leagues[leagueIndex].data, response.data];\n\t\tevent = response.data;\n\t}\n\n\tif (event?.status.type.name === \"STATUS_FINAL\") {\n\t\topenStatus = \"Ended\";\n\t} else if (event?.status.type.state === \"in\") {\n\t\topenStatus = event.status.period <= 1 ? \"danger\" : \"Closed\";\n\t} else if (event?.status.type.state === \"pre\") {\n\t\tif (date.getDate() === now.getDate() && date.getMonth() === now.getMonth()) {\n\t\t\topenStatus = timeDiff <= 2 ? \"warning\" : \"info\";\n\t\t}\n\t}\n\n\treturn { ...transaction, event, openStatus };\n}\n\nexport async function EventsFinder(transactions, type) {\n\tlet bets = type === \"league\" ? transactions.bets : transactions;\n\ttry {\n\t\tbets = await Promise.all(\n\t\t\tbets.map(async (bet) => {\n\t\t\t\tif (bet.details.type === \"Mine Reward\") {\n\t\t\t\t\treturn bet;\n\t\t\t\t} else {\n\t\t\t\t\tconst now = new Date();\n\t\t\t\t\tconst date = new Date(bet.details.date);\n\t\t\t\t\tconst timeDiff = (date.getTime() - now.getTime()) / (3600 * 1000);\n\t\t\t\t\tconst yyyymmdd = date.yyyymmdd();\n\t\t\t\t\tconst leagueIndex = leagues.findIndex((league) => league.display_name === bet.details.sport);\n\t\t\t\t\tlet event, openStatus;\n\t\t\t\t\tif (leagues[leagueIndex].data.some((event) => event.id === bet.details.gameId)) {\n\t\t\t\t\t\tevent = leagues[leagueIndex].data.find((event) => event.id === bet.details.gameId);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst response = await axios.get(\n\t\t\t\t\t\t\t`http://site.api.espn.com/apis/site/v2/sports/${leagues[leagueIndex].sport}/${leagues[leagueIndex].league_name}/scoreboard?dates=${yyyymmdd}`\n\t\t\t\t\t\t);\n\t\t\t\t\t\tleagues[leagueIndex].data = [...leagues[leagueIndex].data, ...response.data.events];\n\t\t\t\t\t\tevent = response.data.events.find((event) => event.id === bet.details.gameId);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!event) {\n\t\t\t\t\t\tconst response = await axios.get(\n\t\t\t\t\t\t\t`http://site.api.espn.com/apis/site/v2/sports/${leagues[leagueIndex].sport}/${leagues[leagueIndex].league_name}/scoreboard/${bet.details.gameId}`\n\t\t\t\t\t\t);\n\t\t\t\t\t\tleagues[leagueIndex].data = [...leagues[leagueIndex].data, response.data];\n\t\t\t\t\t\tevent = response.data;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (event?.status.type.name === \"STATUS_FINAL\") {\n\t\t\t\t\t\topenStatus = \"Ended\";\n\t\t\t\t\t} else if (event?.status.type.state === \"in\") {\n\t\t\t\t\t\topenStatus = event.status.period <= 1 ? \"danger\" : \"Closed\";\n\t\t\t\t\t} else if (event?.status.type.state === \"pre\") {\n\t\t\t\t\t\tif (date.getDate() === now.getDate() && date.getMonth() === now.getMonth()) {\n\t\t\t\t\t\t\topenStatus = timeDiff <= 2 ? \"warning\" : \"info\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn { ...bet, event, openStatus };\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t} catch (err) {\n\t\tconsole.log(err.message);\n\t}\n\treturn type === \"league\" ? { ...transactions, bets } : bets;\n}\n"]},"metadata":{},"sourceType":"module"}