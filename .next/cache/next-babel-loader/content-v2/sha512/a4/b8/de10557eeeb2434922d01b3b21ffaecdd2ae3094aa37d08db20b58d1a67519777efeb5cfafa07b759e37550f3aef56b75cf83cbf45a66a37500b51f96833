{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _toConsumableArray from \"/Users/colechalland/Projects/ChalkCoin/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\n\nvar _jsxFileName = \"/Users/colechalland/Projects/ChalkCoin/pages/blockchain.js\",\n    _s = $RefreshSig$();\n\nimport { useContext, useEffect, useState } from \"react\";\nimport { Container, Row, Col, Alert } from \"react-bootstrap\";\nimport { BlockchainContext } from \"../contexts/Blockchain.Context\";\nimport { UserContext } from \"../contexts/User.Context\";\nimport PendingTransactions from \"../components/Blockchain/PendingTransactions\";\nimport Chain from \"../components/Blockchain/Chain\";\nimport SelectedBlock from \"../components/Blockchain/SelectedBlock\";\nexport default function Blockchain() {\n  _s();\n\n  var currentUser = useContext(UserContext);\n  var blockchain = useContext(BlockchainContext);\n\n  var _useState = useState(blockchain.pendingTransactions),\n      pendingTransactions = _useState[0],\n      setPendingTransactions = _useState[1];\n\n  var _useState2 = useState(false),\n      pendingTransactionsState = _useState2[0],\n      setPendingTransactionsState = _useState2[1];\n\n  var _useState3 = useState([]),\n      blocks = _useState3[0],\n      setBlocks = _useState3[1];\n\n  var _useState4 = useState(false),\n      blocksState = _useState4[0],\n      setBlocksState = _useState4[1];\n\n  var _useState5 = useState(blockchain.selectedBlock),\n      selectedBlock = _useState5[0],\n      setSelectedBlock = _useState5[1];\n\n  var _useState6 = useState(false),\n      selectedBlockState = _useState6[0],\n      setSelectedBlockState = _useState6[1];\n\n  var _useState7 = useState(false),\n      mineAlertState = _useState7[0],\n      setMineAlertState = _useState7[1];\n\n  var _useState8 = useState(false),\n      mineState = _useState8[0],\n      setMineState = _useState8[1]; // const blockchainBlocks = [\n  // \t...blockchain.chain.slice(Math.max(blockchain.chain.length - 5, 1)),\n  // ].reverse();\n\n\n  useEffect(function () {\n    setPendingTransactions(blockchain.pendingTransactions);\n  }, [blockchain.pendingTransactions]);\n  useEffect(function () {\n    if (blockchain.initialized) setPendingTransactionsState(true);\n\n    if (pendingTransactions.length >= 10) {\n      setMineAlertState(true);\n      setMineState(true);\n    } else {\n      setMineAlertState(false);\n      setMineState(false);\n    }\n  }, [pendingTransactions]);\n  useEffect(function () {\n    setBlocks(_toConsumableArray(blockchain.chain).reverse());\n    if (blockchain.chain.length > 0) setBlocksState(true);\n  }, [blockchain.chain]);\n  useEffect(function () {\n    setSelectedBlock(blockchain.selectedBlock);\n    if (blockchain.selectedBlock.hash) setSelectedBlockState(true);\n  }, [blockchain.selectedBlock]);\n  var mineAlert = mineAlertState ? /*#__PURE__*/_jsxDEV(Alert, {\n    className: \"alert-with-icon\",\n    variant: \"success\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      \"aria-hidden\": true,\n      className: \"close\",\n      \"data-dismiss\": \"alert\",\n      type: \"button\",\n      onClick: function onClick() {\n        setMineAlertState(true);\n      },\n      children: /*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"nc-icon nc-simple-remove\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      \"data-notify\": \"icon\",\n      className: \"nc-icon nc-bell-55\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      \"data-notify\": \"message\",\n      children: \"There's enough pending transactions to be mined.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 3\n  }, this) : null; // console.log(\"blockchain\", blockchain);\n  // console.log(\"pending transactions\", pendingTransactions);\n  // console.log(\"blockchain blocks\", blockchainBlocks);\n  // console.log(\"selectedBlock\", selectedBlock);\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    fluid: true,\n    children: [/*#__PURE__*/_jsxDEV(Row, {\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        children: mineAlert\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(PendingTransactions, {\n      pendingTransactions: pendingTransactions,\n      mineState: mineState,\n      currentUser: currentUser,\n      loaded: pendingTransactionsState\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Chain, {\n      blocks: blocks,\n      selectedBlock: selectedBlock,\n      loaded: blocksState\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(SelectedBlock, {\n      selectedBlock: selectedBlock,\n      currentUser: currentUser,\n      loaded: selectedBlockState\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 3\n  }, this);\n}\n\n_s(Blockchain, \"kB1MVmT+/NP66xFVckzooeQAXpI=\");\n\n_c = Blockchain;\n\nvar _c;\n\n$RefreshReg$(_c, \"Blockchain\");","map":{"version":3,"sources":["/Users/colechalland/Projects/ChalkCoin/pages/blockchain.js"],"names":["useContext","useEffect","useState","Container","Row","Col","Alert","BlockchainContext","UserContext","PendingTransactions","Chain","SelectedBlock","Blockchain","currentUser","blockchain","pendingTransactions","setPendingTransactions","pendingTransactionsState","setPendingTransactionsState","blocks","setBlocks","blocksState","setBlocksState","selectedBlock","setSelectedBlock","selectedBlockState","setSelectedBlockState","mineAlertState","setMineAlertState","mineState","setMineState","initialized","length","chain","reverse","hash","mineAlert"],"mappings":"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","sourcesContent":["import { useContext, useEffect, useState } from \"react\";\nimport { Container, Row, Col, Alert } from \"react-bootstrap\";\nimport { BlockchainContext } from \"../contexts/Blockchain.Context\";\nimport { UserContext } from \"../contexts/User.Context\";\nimport PendingTransactions from \"../components/Blockchain/PendingTransactions\";\nimport Chain from \"../components/Blockchain/Chain\";\nimport SelectedBlock from \"../components/Blockchain/SelectedBlock\";\n\nexport default function Blockchain() {\n\tconst currentUser = useContext(UserContext);\n\tconst blockchain = useContext(BlockchainContext);\n\tconst [pendingTransactions, setPendingTransactions] = useState(blockchain.pendingTransactions);\n\tconst [pendingTransactionsState, setPendingTransactionsState] = useState(false);\n\tconst [blocks, setBlocks] = useState([]);\n\tconst [blocksState, setBlocksState] = useState(false);\n\tconst [selectedBlock, setSelectedBlock] = useState(blockchain.selectedBlock);\n\tconst [selectedBlockState, setSelectedBlockState] = useState(false);\n\tconst [mineAlertState, setMineAlertState] = useState(false);\n\tconst [mineState, setMineState] = useState(false);\n\t// const blockchainBlocks = [\n\t// \t...blockchain.chain.slice(Math.max(blockchain.chain.length - 5, 1)),\n\t// ].reverse();\n\n\tuseEffect(() => {\n\t\tsetPendingTransactions(blockchain.pendingTransactions);\n\t}, [blockchain.pendingTransactions]);\n\n\tuseEffect(() => {\n\t\tif (blockchain.initialized) setPendingTransactionsState(true);\n\t\tif (pendingTransactions.length >= 10) {\n\t\t\tsetMineAlertState(true);\n\t\t\tsetMineState(true);\n\t\t} else {\n\t\t\tsetMineAlertState(false);\n\t\t\tsetMineState(false);\n\t\t}\n\t}, [pendingTransactions]);\n\n\tuseEffect(() => {\n\t\tsetBlocks([...blockchain.chain].reverse());\n\t\tif (blockchain.chain.length > 0) setBlocksState(true);\n\t}, [blockchain.chain]);\n\n\tuseEffect(() => {\n\t\tsetSelectedBlock(blockchain.selectedBlock);\n\t\tif (blockchain.selectedBlock.hash) setSelectedBlockState(true);\n\t}, [blockchain.selectedBlock]);\n\n\tlet mineAlert = mineAlertState ? (\n\t\t<Alert className=\"alert-with-icon\" variant=\"success\">\n\t\t\t<button\n\t\t\t\taria-hidden={true}\n\t\t\t\tclassName=\"close\"\n\t\t\t\tdata-dismiss=\"alert\"\n\t\t\t\ttype=\"button\"\n\t\t\t\tonClick={() => {\n\t\t\t\t\tsetMineAlertState(true);\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<i className=\"nc-icon nc-simple-remove\"></i>\n\t\t\t</button>\n\t\t\t<span data-notify=\"icon\" className=\"nc-icon nc-bell-55\"></span>\n\t\t\t<span data-notify=\"message\">{\"There's enough pending transactions to be mined.\"}</span>\n\t\t</Alert>\n\t) : null;\n\n\t// console.log(\"blockchain\", blockchain);\n\t// console.log(\"pending transactions\", pendingTransactions);\n\t// console.log(\"blockchain blocks\", blockchainBlocks);\n\t// console.log(\"selectedBlock\", selectedBlock);\n\n\treturn (\n\t\t<Container fluid>\n\t\t\t<Row>\n\t\t\t\t<Col>{mineAlert}</Col>\n\t\t\t</Row>\n\t\t\t<PendingTransactions\n\t\t\t\tpendingTransactions={pendingTransactions}\n\t\t\t\tmineState={mineState}\n\t\t\t\tcurrentUser={currentUser}\n\t\t\t\tloaded={pendingTransactionsState}\n\t\t\t/>\n\t\t\t<Chain blocks={blocks} selectedBlock={selectedBlock} loaded={blocksState} />\n\t\t\t<SelectedBlock selectedBlock={selectedBlock} currentUser={currentUser} loaded={selectedBlockState} />\n\t\t</Container>\n\t);\n}\n"]},"metadata":{},"sourceType":"module"}