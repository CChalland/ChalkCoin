{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/colechalland/Projects/ChalkCoin/pages/games.js\";\nimport { useRouter } from \"next/router\";\nimport { useCallback, useContext, useState, useRef, useEffect } from \"react\";\nimport { Swiper, SwiperSlide } from \"swiper/react\";\nimport { getSession } from \"next-auth/client\";\nimport { Container, Row, Col, Card } from \"react-bootstrap\";\nimport { SportContext, SportDispatch } from \"../contexts/Sports.Context\";\nimport { UserContext } from \"../contexts/User.Context\";\nimport moment from \"moment\";\nimport axios from \"axios\";\nimport GameCard from \"../components/Game/GameCard\";\nimport NotificationAlert from \"react-notification-alert\";\nimport Loading from \"../components/Utility/Loading\";\nexport default function Games({\n  query,\n  users\n}) {\n  const router = useRouter();\n  const currentUser = useContext(UserContext);\n  const sportsData = useContext(SportContext);\n  const dispatch = useContext(SportDispatch);\n  const notificationAlertRef = useRef(null);\n  const {\n    0: league,\n    1: setLeague\n  } = useState({});\n  const {\n    0: games,\n    1: setGames\n  } = useState([]);\n  const {\n    0: swiperIndex,\n    1: setSwiperIndex\n  } = useState(7);\n  const {\n    0: selectedIndex,\n    1: setSelectedIndex\n  } = useState(7);\n  const {\n    0: selectedDate,\n    1: setSelectedDate\n  } = useState({});\n  const getData = useCallback(async (league, date) => {\n    axios.get(`http://site.api.espn.com/apis/site/v2/sports/${league.sport}/${league.league_name}/scoreboard?dates=${date.value}`).then(response => {\n      console.log(response.data);\n      dispatch({\n        type: \"SELECTED DATE\",\n        data: response.data,\n        date: selectedDate,\n        sport: league.display_name\n      });\n    });\n  });\n  useEffect(() => {\n    if (selectedDate.value) getData(league, selectedDate);\n  }, [selectedDate]);\n  useEffect(() => {\n    const gameData = sportsData.find(sport => {\n      var _query$sport;\n\n      return sport.abbrv === ((_query$sport = query.sport) === null || _query$sport === void 0 ? void 0 : _query$sport.toUpperCase());\n    });\n    setLeague(gameData);\n\n    if (router.query.error) {\n      notify(router.query.error);\n    }\n\n    if (!league || !router.query.sport) {\n      router.replace(\"/\", undefined, {\n        shallow: true\n      });\n    }\n  }, [router]);\n  useEffect(() => {\n    const gameData = sportsData.find(sport => {\n      var _query$sport2;\n\n      return sport.abbrv === ((_query$sport2 = query.sport) === null || _query$sport2 === void 0 ? void 0 : _query$sport2.toUpperCase());\n    });\n    setLeague(gameData);\n\n    if (gameData.data.days.length > 0) {\n      const selected = gameData.data.days.find(day => day.date === selectedDate);\n      console.log(\"games - selected\", selected);\n      setGames(selected.events);\n    } else if (gameData.data.events) setGames(gameData.data.events);else setGames([]);\n  }, [sportsData]);\n  console.log(\"games - games\", games);\n\n  const notify = errMsg => {\n    let options = {\n      place: \"tc\",\n      message: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"b\", {\n            children: errMsg\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 5\n      }, this),\n      type: \"danger\",\n      icon: \"nc-icon nc-bell-55\",\n      autoDismiss: 7\n    };\n    notificationAlertRef.current.notificationAlert(options);\n    router.replace(`${router.pathname}?sport=${query.sport}`, undefined, {\n      shallow: true\n    });\n  };\n\n  const datesData = () => {\n    const days = [];\n    const today = moment().format(\"YYYYMMDD\");\n    const dateStart = moment().subtract(7, \"days\");\n    const dateEnd = moment().add(90, \"days\");\n\n    while (dateEnd.diff(dateStart, \"days\") >= 0) {\n      const str = dateStart.format(\"ddd,MMM,Do,YYYYMMDD\").split(\",\");\n      days.push({\n        day: str[0],\n        month: str[1],\n        date: str[2],\n        value: str[3],\n        today: today === str[3] ? true : false\n      });\n      dateStart.add(1, \"days\");\n    }\n\n    return days;\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rna-container\",\n      children: /*#__PURE__*/_jsxDEV(NotificationAlert, {\n        ref: notificationAlertRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      fluid: true,\n      children: [/*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            children: league.display_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          lg: 10,\n          children: /*#__PURE__*/_jsxDEV(Swiper, {\n            className: \"\",\n            spaceBetween: 5,\n            slidesPerView: 2,\n            initialSlide: swiperIndex,\n            breakpoints: {\n              260: {\n                slidesPerView: 3\n              },\n              320: {\n                slidesPerView: 5\n              },\n              480: {\n                slidesPerView: 7\n              },\n              1400: {\n                slidesPerView: 7\n              }\n            },\n            onSlideChange: swiper => setSwiperIndex(swiper.activeIndex),\n            children: datesData().map((item, key) => {\n              return /*#__PURE__*/_jsxDEV(SwiperSlide, {\n                onClick: () => {\n                  setSelectedIndex(key);\n                  setSelectedDate(item);\n                },\n                children: [/*#__PURE__*/_jsxDEV(Row, {\n                  children: /*#__PURE__*/_jsxDEV(Col, {\n                    children: /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: `${selectedIndex === key ? \"\" : \"text-muted\"} mb-1 py-0 ml-2`,\n                      children: item.day\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 148,\n                      columnNumber: 13\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 147,\n                    columnNumber: 12\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 146,\n                  columnNumber: 11\n                }, this), /*#__PURE__*/_jsxDEV(Row, {\n                  children: /*#__PURE__*/_jsxDEV(Col, {\n                    children: /*#__PURE__*/_jsxDEV(Card, {\n                      border: \"secondary\",\n                      className: \"mr-1\",\n                      style: {\n                        width: \"3rem\",\n                        height: \"4rem\"\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                        className: `${selectedIndex === key ? \"text-danger\" : \"text-danger-muted\"} text-center my-1 border-bottom`,\n                        children: item.month\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 156,\n                        columnNumber: 14\n                      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                        className: `${selectedIndex === key ? \"\" : \"text-muted\"} text-center my-1`,\n                        children: item.date\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 163,\n                        columnNumber: 14\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 155,\n                      columnNumber: 13\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 154,\n                    columnNumber: 12\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 153,\n                  columnNumber: 11\n                }, this)]\n              }, key, true, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 10\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 5\n      }, this), games ? games.map((game, key) => /*#__PURE__*/_jsxDEV(Row, {\n        className: \"my-3\",\n        children: /*#__PURE__*/_jsxDEV(GameCard, {\n          panelKey: key,\n          gameData: game,\n          sportName: league === null || league === void 0 ? void 0 : league.display_name,\n          users: users,\n          currentUser: currentUser,\n          completed: game.status.type.completed\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 8\n        }, this)\n      }, game.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 7\n      }, this)) : /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 6\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n}\nexport async function getServerSideProps(context) {\n  const {\n    req,\n    res\n  } = context;\n  const session = await getSession({\n    req\n  });\n  let users = [];\n\n  if (session) {\n    users = await prisma.user.findMany();\n    users = users.map(user => {\n      delete user.password;\n      delete user.balance;\n      delete user.paypal;\n      delete user.emailVerified;\n      delete user.createdAt;\n      delete user.updatedAt;\n      return user;\n    }).filter(user => {\n      return user.id !== session.user.id;\n    });\n  }\n\n  return {\n    props: {\n      query: context.query,\n      users\n    }\n  };\n}","map":{"version":3,"sources":["/Users/colechalland/Projects/ChalkCoin/pages/games.js"],"names":["useRouter","useCallback","useContext","useState","useRef","useEffect","Swiper","SwiperSlide","getSession","Container","Row","Col","Card","SportContext","SportDispatch","UserContext","moment","axios","GameCard","NotificationAlert","Loading","Games","query","users","router","currentUser","sportsData","dispatch","notificationAlertRef","league","setLeague","games","setGames","swiperIndex","setSwiperIndex","selectedIndex","setSelectedIndex","selectedDate","setSelectedDate","getData","date","get","sport","league_name","value","then","response","console","log","data","type","display_name","gameData","find","abbrv","toUpperCase","error","notify","replace","undefined","shallow","days","length","selected","day","events","errMsg","options","place","message","icon","autoDismiss","current","notificationAlert","pathname","datesData","today","format","dateStart","subtract","dateEnd","add","diff","str","split","push","month","slidesPerView","swiper","activeIndex","map","item","key","width","height","game","status","completed","id","getServerSideProps","context","req","res","session","prisma","user","findMany","password","balance","paypal","emailVerified","createdAt","updatedAt","filter","props"],"mappings":"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","sourcesContent":["import { useRouter } from \"next/router\";\nimport { useCallback, useContext, useState, useRef, useEffect } from \"react\";\nimport { Swiper, SwiperSlide } from \"swiper/react\";\nimport { getSession } from \"next-auth/client\";\nimport { Container, Row, Col, Card } from \"react-bootstrap\";\nimport { SportContext, SportDispatch } from \"../contexts/Sports.Context\";\nimport { UserContext } from \"../contexts/User.Context\";\nimport moment from \"moment\";\nimport axios from \"axios\";\nimport GameCard from \"../components/Game/GameCard\";\nimport NotificationAlert from \"react-notification-alert\";\nimport Loading from \"../components/Utility/Loading\";\n\nexport default function Games({ query, users }) {\n\tconst router = useRouter();\n\tconst currentUser = useContext(UserContext);\n\tconst sportsData = useContext(SportContext);\n\tconst dispatch = useContext(SportDispatch);\n\tconst notificationAlertRef = useRef(null);\n\tconst [league, setLeague] = useState({});\n\tconst [games, setGames] = useState([]);\n\tconst [swiperIndex, setSwiperIndex] = useState(7);\n\tconst [selectedIndex, setSelectedIndex] = useState(7);\n\tconst [selectedDate, setSelectedDate] = useState({});\n\n\tconst getData = useCallback(async (league, date) => {\n\t\taxios\n\t\t\t.get(\n\t\t\t\t`http://site.api.espn.com/apis/site/v2/sports/${league.sport}/${league.league_name}/scoreboard?dates=${date.value}`\n\t\t\t)\n\t\t\t.then((response) => {\n\t\t\t\tconsole.log(response.data);\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"SELECTED DATE\",\n\t\t\t\t\tdata: response.data,\n\t\t\t\t\tdate: selectedDate,\n\t\t\t\t\tsport: league.display_name,\n\t\t\t\t});\n\t\t\t});\n\t});\n\n\tuseEffect(() => {\n\t\tif (selectedDate.value) getData(league, selectedDate);\n\t}, [selectedDate]);\n\n\tuseEffect(() => {\n\t\tconst gameData = sportsData.find((sport) => {\n\t\t\treturn sport.abbrv === query.sport?.toUpperCase();\n\t\t});\n\t\tsetLeague(gameData);\n\t\tif (router.query.error) {\n\t\t\tnotify(router.query.error);\n\t\t}\n\t\tif (!league || !router.query.sport) {\n\t\t\trouter.replace(\"/\", undefined, { shallow: true });\n\t\t}\n\t}, [router]);\n\n\tuseEffect(() => {\n\t\tconst gameData = sportsData.find((sport) => {\n\t\t\treturn sport.abbrv === query.sport?.toUpperCase();\n\t\t});\n\t\tsetLeague(gameData);\n\t\tif (gameData.data.days.length > 0) {\n\t\t\tconst selected = gameData.data.days.find((day) => day.date === selectedDate);\n\t\t\tconsole.log(\"games - selected\", selected);\n\t\t\tsetGames(selected.events);\n\t\t} else if (gameData.data.events) setGames(gameData.data.events);\n\t\telse setGames([]);\n\t}, [sportsData]);\n\n\tconsole.log(\"games - games\", games);\n\n\tconst notify = (errMsg) => {\n\t\tlet options = {\n\t\t\tplace: \"tc\",\n\t\t\tmessage: (\n\t\t\t\t<div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<b>{errMsg}</b>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t),\n\t\t\ttype: \"danger\",\n\t\t\ticon: \"nc-icon nc-bell-55\",\n\t\t\tautoDismiss: 7,\n\t\t};\n\t\tnotificationAlertRef.current.notificationAlert(options);\n\t\trouter.replace(`${router.pathname}?sport=${query.sport}`, undefined, { shallow: true });\n\t};\n\tconst datesData = () => {\n\t\tconst days = [];\n\t\tconst today = moment().format(\"YYYYMMDD\");\n\t\tconst dateStart = moment().subtract(7, \"days\");\n\t\tconst dateEnd = moment().add(90, \"days\");\n\t\twhile (dateEnd.diff(dateStart, \"days\") >= 0) {\n\t\t\tconst str = dateStart.format(\"ddd,MMM,Do,YYYYMMDD\").split(\",\");\n\t\t\tdays.push({\n\t\t\t\tday: str[0],\n\t\t\t\tmonth: str[1],\n\t\t\t\tdate: str[2],\n\t\t\t\tvalue: str[3],\n\t\t\t\ttoday: today === str[3] ? true : false,\n\t\t\t});\n\t\t\tdateStart.add(1, \"days\");\n\t\t}\n\t\treturn days;\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"rna-container\">\n\t\t\t\t<NotificationAlert ref={notificationAlertRef} />\n\t\t\t</div>\n\t\t\t<Container fluid>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col>\n\t\t\t\t\t\t<h1>{league.display_name}</h1>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\n\t\t\t\t<Row>\n\t\t\t\t\t<Col lg={10}>\n\t\t\t\t\t\t<Swiper\n\t\t\t\t\t\t\tclassName=\"\"\n\t\t\t\t\t\t\tspaceBetween={5}\n\t\t\t\t\t\t\tslidesPerView={2}\n\t\t\t\t\t\t\tinitialSlide={swiperIndex}\n\t\t\t\t\t\t\tbreakpoints={{\n\t\t\t\t\t\t\t\t260: { slidesPerView: 3 },\n\t\t\t\t\t\t\t\t320: { slidesPerView: 5 },\n\t\t\t\t\t\t\t\t480: { slidesPerView: 7 },\n\t\t\t\t\t\t\t\t1400: { slidesPerView: 7 },\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonSlideChange={(swiper) => setSwiperIndex(swiper.activeIndex)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{datesData().map((item, key) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<SwiperSlide\n\t\t\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\tsetSelectedIndex(key);\n\t\t\t\t\t\t\t\t\t\t\tsetSelectedDate(item);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t\t\t\t\t<Col>\n\t\t\t\t\t\t\t\t\t\t\t\t<p className={`${selectedIndex === key ? \"\" : \"text-muted\"} mb-1 py-0 ml-2`}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{item.day}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t\t\t\t\t<Col>\n\t\t\t\t\t\t\t\t\t\t\t\t<Card border=\"secondary\" className=\"mr-1\" style={{ width: \"3rem\", height: \"4rem\" }}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`${\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tselectedIndex === key ? \"text-danger\" : \"text-danger-muted\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} text-center my-1 border-bottom`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.month}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p className={`${selectedIndex === key ? \"\" : \"text-muted\"} text-center my-1`}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.date}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t\t\t</SwiperSlide>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</Swiper>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\n\t\t\t\t{games ? (\n\t\t\t\t\tgames.map((game, key) => (\n\t\t\t\t\t\t<Row className=\"my-3\" key={game.id}>\n\t\t\t\t\t\t\t<GameCard\n\t\t\t\t\t\t\t\tpanelKey={key}\n\t\t\t\t\t\t\t\tgameData={game}\n\t\t\t\t\t\t\t\tsportName={league?.display_name}\n\t\t\t\t\t\t\t\tusers={users}\n\t\t\t\t\t\t\t\tcurrentUser={currentUser}\n\t\t\t\t\t\t\t\tcompleted={game.status.type.completed}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t))\n\t\t\t\t) : (\n\t\t\t\t\t<Loading />\n\t\t\t\t)}\n\t\t\t</Container>\n\t\t</>\n\t);\n}\n\nexport async function getServerSideProps(context) {\n\tconst { req, res } = context;\n\tconst session = await getSession({ req });\n\tlet users = [];\n\tif (session) {\n\t\tusers = await prisma.user.findMany();\n\t\tusers = users\n\t\t\t.map((user) => {\n\t\t\t\tdelete user.password;\n\t\t\t\tdelete user.balance;\n\t\t\t\tdelete user.paypal;\n\t\t\t\tdelete user.emailVerified;\n\t\t\t\tdelete user.createdAt;\n\t\t\t\tdelete user.updatedAt;\n\n\t\t\t\treturn user;\n\t\t\t})\n\t\t\t.filter((user) => {\n\t\t\t\treturn user.id !== session.user.id;\n\t\t\t});\n\t}\n\n\treturn {\n\t\tprops: { query: context.query, users },\n\t};\n}\n"]},"metadata":{},"sourceType":"module"}