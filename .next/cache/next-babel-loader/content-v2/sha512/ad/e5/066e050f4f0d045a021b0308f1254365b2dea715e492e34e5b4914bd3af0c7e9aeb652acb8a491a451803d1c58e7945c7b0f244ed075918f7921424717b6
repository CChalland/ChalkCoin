{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/Users/colechalland/Projects/ChalkCoin/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/colechalland/Projects/ChalkCoin/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/colechalland/Projects/ChalkCoin/pages/games.js\",\n    _s = $RefreshSig$();\n\nimport { useRouter } from \"next/router\";\nimport { useCallback, useContext, useState, useRef, useEffect } from \"react\";\nimport { Container, Row, Col, Card } from \"react-bootstrap\";\nimport { SportContext, SportDispatch } from \"../contexts/Sports.Context\";\nimport { UserContext } from \"../contexts/User.Context\";\nimport moment from \"moment\";\nimport axios from \"axios\";\nimport GameCard from \"../components/Game/GameCard\";\nimport NotificationAlert from \"react-notification-alert\";\nimport Loading from \"../components/Utility/Loading\";\nimport { Swiper, SwiperSlide } from \"swiper/react\";\nimport SwiperCore, { Autoplay, EffectFade, Navigation, Pagination } from \"swiper\";\nSwiperCore.use([Pagination, Navigation, Autoplay, EffectFade]);\nexport var __N_SSP = true;\nexport default function Games(_ref) {\n  _s();\n\n  var _this = this;\n\n  var query = _ref.query,\n      users = _ref.users;\n  var router = useRouter();\n  var currentUser = useContext(UserContext);\n  var sportsData = useContext(SportContext);\n  var dispatch = useContext(SportDispatch);\n  var notificationAlertRef = useRef(null);\n\n  var _useState = useState({}),\n      league = _useState[0],\n      setLeague = _useState[1];\n\n  var _useState2 = useState([]),\n      games = _useState2[0],\n      setGames = _useState2[1];\n\n  var _useState3 = useState(7),\n      swiperIndex = _useState3[0],\n      setSwiperIndex = _useState3[1];\n\n  var _useState4 = useState(-1),\n      selectedIndex = _useState4[0],\n      setSelectedIndex = _useState4[1];\n\n  var _useState5 = useState({}),\n      selectedDate = _useState5[0],\n      setSelectedDate = _useState5[1];\n\n  var notify = function notify(errMsg) {\n    var options = {\n      place: \"tc\",\n      message: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"b\", {\n            children: errMsg\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 33,\n            columnNumber: 7\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 6\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 5\n      }, _this),\n      type: \"danger\",\n      icon: \"nc-icon nc-bell-55\",\n      autoDismiss: 7\n    };\n    notificationAlertRef.current.notificationAlert(options);\n    router.replace(\"\".concat(router.pathname, \"?sport=\").concat(query.sport), undefined, {\n      shallow: true\n    });\n  };\n\n  var datesData = function datesData() {\n    var days = [];\n    var today = moment().format(\"YYYYMMDD\");\n    var dateStart = moment().subtract(7, \"days\");\n    var dateEnd = moment().add(90, \"days\");\n\n    while (dateEnd.diff(dateStart, \"days\") >= 0) {\n      var str = dateStart.format(\"ddd,MMM,Do,YYYYMMDD\").split(\",\");\n      days.push({\n        day: str[0],\n        month: str[1],\n        date: str[2],\n        value: str[3],\n        today: today === str[3] ? true : false,\n        past: moment().diff(dateStart, \"days\") > 0 ? true : false\n      });\n      dateStart.add(1, \"days\");\n    }\n\n    return days;\n  };\n\n  var getData = useCallback( /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(league, date) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              axios.get(\"http://site.api.espn.com/apis/site/v2/sports/\".concat(league.sport, \"/\").concat(league.league_name, \"/scoreboard?dates=\").concat(date.value)).then(function (response) {\n                console.log(response.data);\n                dispatch({\n                  type: \"SELECTED DATE\",\n                  data: response.data,\n                  date: selectedDate,\n                  sport: league.display_name\n                });\n              });\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x, _x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }());\n  useEffect(function () {\n    if (selectedDate.value) getData(league, selectedDate);\n  }, [selectedDate]);\n  useEffect(function () {\n    if (router.query.error) {\n      notify(router.query.error);\n    } else if (!league || !router.query.sport) {\n      setSelectedIndex(-1);\n      setSelectedDate({});\n      router.replace(\"/\", undefined, {\n        shallow: true\n      });\n    } else if (router.query.sport.toUpperCase() !== league.abbrv) {\n      setSelectedIndex(-1);\n      setSelectedDate({});\n      setLeague(sportsData.find(function (sport) {\n        return sport.abbrv === router.query.sport.toUpperCase();\n      }));\n    }\n  }, [router]);\n  useEffect(function () {\n    setLeague(sportsData.find(function (sport) {\n      return sport.abbrv === router.query.sport.toUpperCase();\n    }));\n  }, [sportsData]);\n  useEffect(function () {\n    var _league$data, _league$data3;\n\n    if (((_league$data = league.data) === null || _league$data === void 0 ? void 0 : _league$data.days.length) > 0) {\n      var _league$data2;\n\n      var selected = (_league$data2 = league.data) === null || _league$data2 === void 0 ? void 0 : _league$data2.days.find(function (day) {\n        return day.date === selectedDate;\n      });\n\n      if (selected.events.length > 0) {\n        setGames(selected.events);\n      } else {\n        setGames([]);\n      }\n    } else if ((_league$data3 = league.data) !== null && _league$data3 !== void 0 && _league$data3.events) setGames(league.data.events);else {\n      setGames([]);\n    }\n  }, [league]);\n  var gameCards;\n  if (games.length > 0) gameCards = games.map(function (game, key) {\n    return /*#__PURE__*/_jsxDEV(Row, {\n      className: \"my-3\",\n      children: /*#__PURE__*/_jsxDEV(GameCard, {\n        panelKey: key,\n        gameData: game,\n        sportName: league === null || league === void 0 ? void 0 : league.display_name,\n        users: users,\n        currentUser: currentUser,\n        completed: game.status.type.completed\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 5\n      }, _this)\n    }, game.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 4\n    }, _this);\n  });else if (selectedDate.value) gameCards = /*#__PURE__*/_jsxDEV(Row, {\n    children: /*#__PURE__*/_jsxDEV(Col, {\n      children: /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"No Events Found\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 6\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 140,\n    columnNumber: 4\n  }, this);else gameCards = /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 146,\n    columnNumber: 19\n  }, this); // console.log(\"games - selectedDate\", selectedDate);\n  // console.log(\"games - league\", league);\n  // console.log(\"games -  games\", games);\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rna-container\",\n      children: /*#__PURE__*/_jsxDEV(NotificationAlert, {\n        ref: notificationAlertRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      fluid: true,\n      children: [/*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            children: league.display_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          lg: 11,\n          xl: 10,\n          children: /*#__PURE__*/_jsxDEV(Swiper, {\n            className: \"\",\n            enabled: true,\n            spaceBetween: 5,\n            slidesPerView: 2,\n            initialSlide: swiperIndex,\n            breakpoints: {\n              260: {\n                slidesPerView: 3\n              },\n              320: {\n                slidesPerView: 5\n              },\n              480: {\n                slidesPerView: 7\n              },\n              720: {\n                slidesPerView: 9\n              },\n              940: {\n                slidesPerView: 10\n              },\n              1200: {\n                slidesPerView: 11\n              },\n              1400: {\n                slidesPerView: 14\n              },\n              1600: {\n                slidesPerView: 16\n              }\n            },\n            navigation: {\n              nextEl: \".next\",\n              prevEl: \".prev\"\n            },\n            onSlideChange: function onSlideChange(swiper) {\n              return setSwiperIndex(swiper.activeIndex);\n            },\n            children: datesData().map(function (item, key) {\n              // console.log(\"games - datesData() - item\", item);\n              return /*#__PURE__*/_jsxDEV(SwiperSlide, {\n                onClick: function onClick() {\n                  setSelectedIndex(key);\n                  setSelectedDate(item);\n                },\n                children: [/*#__PURE__*/_jsxDEV(Row, {\n                  children: /*#__PURE__*/_jsxDEV(Col, {\n                    children: /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"\".concat(selectedIndex === key ? \"\" : \"text-muted\", \" mb-1 py-0 ml-2\"),\n                      children: item.day\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 198,\n                      columnNumber: 13\n                    }, _this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 197,\n                    columnNumber: 12\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 196,\n                  columnNumber: 11\n                }, _this), /*#__PURE__*/_jsxDEV(Row, {\n                  children: /*#__PURE__*/_jsxDEV(Col, {\n                    children: /*#__PURE__*/_jsxDEV(Card, {\n                      border: \"secondary\",\n                      className: \"mr-1\",\n                      style: {\n                        width: \"3rem\",\n                        height: \"4rem\"\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"\".concat(selectedIndex === key ? \"text-danger\" : \"text-danger-muted\", \" text-center my-1 border-bottom\"),\n                        children: item.month\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 206,\n                        columnNumber: 14\n                      }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"\".concat(selectedIndex === key ? \"\" : \"text-muted\", \" text-center my-1\"),\n                        children: item.date\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 213,\n                        columnNumber: 14\n                      }, _this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 205,\n                      columnNumber: 13\n                    }, _this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 204,\n                    columnNumber: 12\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 203,\n                  columnNumber: 11\n                }, _this)]\n              }, key, true, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 10\n              }, _this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 5\n      }, this), gameCards]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Games, \"VBe44OgXcDk2LohUaOSX7jtnfFY=\", false, function () {\n  return [useRouter];\n});\n\n_c = Games;\n\nvar _c;\n\n$RefreshReg$(_c, \"Games\");","map":{"version":3,"sources":["/Users/colechalland/Projects/ChalkCoin/pages/games.js"],"names":["useRouter","useCallback","useContext","useState","useRef","useEffect","Container","Row","Col","Card","SportContext","SportDispatch","UserContext","moment","axios","GameCard","NotificationAlert","Loading","Swiper","SwiperSlide","SwiperCore","Autoplay","EffectFade","Navigation","Pagination","use","Games","query","users","router","currentUser","sportsData","dispatch","notificationAlertRef","league","setLeague","games","setGames","swiperIndex","setSwiperIndex","selectedIndex","setSelectedIndex","selectedDate","setSelectedDate","notify","errMsg","options","place","message","type","icon","autoDismiss","current","notificationAlert","replace","pathname","sport","undefined","shallow","datesData","days","today","format","dateStart","subtract","dateEnd","add","diff","str","split","push","day","month","date","value","past","getData","get","league_name","then","response","console","log","data","display_name","error","toUpperCase","abbrv","find","length","selected","events","gameCards","map","game","key","status","completed","id","slidesPerView","nextEl","prevEl","swiper","activeIndex","item","width","height"],"mappings":"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","sourcesContent":["import { useRouter } from \"next/router\";\nimport { useCallback, useContext, useState, useRef, useEffect } from \"react\";\nimport { getSession } from \"next-auth/client\";\nimport { Container, Row, Col, Card } from \"react-bootstrap\";\nimport { SportContext, SportDispatch } from \"../contexts/Sports.Context\";\nimport { UserContext } from \"../contexts/User.Context\";\nimport moment from \"moment\";\nimport axios from \"axios\";\nimport GameCard from \"../components/Game/GameCard\";\nimport NotificationAlert from \"react-notification-alert\";\nimport Loading from \"../components/Utility/Loading\";\nimport { Swiper, SwiperSlide } from \"swiper/react\";\nimport SwiperCore, { Autoplay, EffectFade, Navigation, Pagination } from \"swiper\";\nSwiperCore.use([Pagination, Navigation, Autoplay, EffectFade]);\n\nexport default function Games({ query, users }) {\n\tconst router = useRouter();\n\tconst currentUser = useContext(UserContext);\n\tconst sportsData = useContext(SportContext);\n\tconst dispatch = useContext(SportDispatch);\n\tconst notificationAlertRef = useRef(null);\n\tconst [league, setLeague] = useState({});\n\tconst [games, setGames] = useState([]);\n\tconst [swiperIndex, setSwiperIndex] = useState(7);\n\tconst [selectedIndex, setSelectedIndex] = useState(-1);\n\tconst [selectedDate, setSelectedDate] = useState({});\n\tconst notify = (errMsg) => {\n\t\tlet options = {\n\t\t\tplace: \"tc\",\n\t\t\tmessage: (\n\t\t\t\t<div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<b>{errMsg}</b>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t),\n\t\t\ttype: \"danger\",\n\t\t\ticon: \"nc-icon nc-bell-55\",\n\t\t\tautoDismiss: 7,\n\t\t};\n\t\tnotificationAlertRef.current.notificationAlert(options);\n\t\trouter.replace(`${router.pathname}?sport=${query.sport}`, undefined, { shallow: true });\n\t};\n\tconst datesData = () => {\n\t\tconst days = [];\n\t\tconst today = moment().format(\"YYYYMMDD\");\n\t\tconst dateStart = moment().subtract(7, \"days\");\n\t\tconst dateEnd = moment().add(90, \"days\");\n\t\twhile (dateEnd.diff(dateStart, \"days\") >= 0) {\n\t\t\tconst str = dateStart.format(\"ddd,MMM,Do,YYYYMMDD\").split(\",\");\n\t\t\tdays.push({\n\t\t\t\tday: str[0],\n\t\t\t\tmonth: str[1],\n\t\t\t\tdate: str[2],\n\t\t\t\tvalue: str[3],\n\t\t\t\ttoday: today === str[3] ? true : false,\n\t\t\t\tpast: moment().diff(dateStart, \"days\") > 0 ? true : false,\n\t\t\t});\n\t\t\tdateStart.add(1, \"days\");\n\t\t}\n\t\treturn days;\n\t};\n\n\tconst getData = useCallback(async (league, date) => {\n\t\taxios\n\t\t\t.get(\n\t\t\t\t`http://site.api.espn.com/apis/site/v2/sports/${league.sport}/${league.league_name}/scoreboard?dates=${date.value}`\n\t\t\t)\n\t\t\t.then((response) => {\n\t\t\t\tconsole.log(response.data);\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"SELECTED DATE\",\n\t\t\t\t\tdata: response.data,\n\t\t\t\t\tdate: selectedDate,\n\t\t\t\t\tsport: league.display_name,\n\t\t\t\t});\n\t\t\t});\n\t});\n\n\tuseEffect(() => {\n\t\tif (selectedDate.value) getData(league, selectedDate);\n\t}, [selectedDate]);\n\n\tuseEffect(() => {\n\t\tif (router.query.error) {\n\t\t\tnotify(router.query.error);\n\t\t} else if (!league || !router.query.sport) {\n\t\t\tsetSelectedIndex(-1);\n\t\t\tsetSelectedDate({});\n\t\t\trouter.replace(\"/\", undefined, { shallow: true });\n\t\t} else if (router.query.sport.toUpperCase() !== league.abbrv) {\n\t\t\tsetSelectedIndex(-1);\n\t\t\tsetSelectedDate({});\n\t\t\tsetLeague(\n\t\t\t\tsportsData.find((sport) => {\n\t\t\t\t\treturn sport.abbrv === router.query.sport.toUpperCase();\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t}, [router]);\n\n\tuseEffect(() => {\n\t\tsetLeague(\n\t\t\tsportsData.find((sport) => {\n\t\t\t\treturn sport.abbrv === router.query.sport.toUpperCase();\n\t\t\t})\n\t\t);\n\t}, [sportsData]);\n\n\tuseEffect(() => {\n\t\tif (league.data?.days.length > 0) {\n\t\t\tconst selected = league.data?.days.find((day) => day.date === selectedDate);\n\t\t\tif (selected.events.length > 0) {\n\t\t\t\tsetGames(selected.events);\n\t\t\t} else {\n\t\t\t\tsetGames([]);\n\t\t\t}\n\t\t} else if (league.data?.events) setGames(league.data.events);\n\t\telse {\n\t\t\tsetGames([]);\n\t\t}\n\t}, [league]);\n\n\tlet gameCards;\n\tif (games.length > 0)\n\t\tgameCards = games.map((game, key) => (\n\t\t\t<Row className=\"my-3\" key={game.id}>\n\t\t\t\t<GameCard\n\t\t\t\t\tpanelKey={key}\n\t\t\t\t\tgameData={game}\n\t\t\t\t\tsportName={league?.display_name}\n\t\t\t\t\tusers={users}\n\t\t\t\t\tcurrentUser={currentUser}\n\t\t\t\t\tcompleted={game.status.type.completed}\n\t\t\t\t/>\n\t\t\t</Row>\n\t\t));\n\telse if (selectedDate.value)\n\t\tgameCards = (\n\t\t\t<Row>\n\t\t\t\t<Col>\n\t\t\t\t\t<h3>No Events Found</h3>\n\t\t\t\t</Col>\n\t\t\t</Row>\n\t\t);\n\telse gameCards = <Loading />;\n\n\t// console.log(\"games - selectedDate\", selectedDate);\n\t// console.log(\"games - league\", league);\n\t// console.log(\"games -  games\", games);\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"rna-container\">\n\t\t\t\t<NotificationAlert ref={notificationAlertRef} />\n\t\t\t</div>\n\t\t\t<Container fluid>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col>\n\t\t\t\t\t\t<h1>{league.display_name}</h1>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\n\t\t\t\t<Row>\n\t\t\t\t\t<Col lg={11} xl={10}>\n\t\t\t\t\t\t<Swiper\n\t\t\t\t\t\t\tclassName=\"\"\n\t\t\t\t\t\t\tenabled={true}\n\t\t\t\t\t\t\tspaceBetween={5}\n\t\t\t\t\t\t\tslidesPerView={2}\n\t\t\t\t\t\t\tinitialSlide={swiperIndex}\n\t\t\t\t\t\t\tbreakpoints={{\n\t\t\t\t\t\t\t\t260: { slidesPerView: 3 },\n\t\t\t\t\t\t\t\t320: { slidesPerView: 5 },\n\t\t\t\t\t\t\t\t480: { slidesPerView: 7 },\n\t\t\t\t\t\t\t\t720: { slidesPerView: 9 },\n\t\t\t\t\t\t\t\t940: { slidesPerView: 10 },\n\t\t\t\t\t\t\t\t1200: { slidesPerView: 11 },\n\t\t\t\t\t\t\t\t1400: { slidesPerView: 14 },\n\t\t\t\t\t\t\t\t1600: { slidesPerView: 16 },\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tnavigation={{ nextEl: \".next\", prevEl: \".prev\" }}\n\t\t\t\t\t\t\tonSlideChange={(swiper) => setSwiperIndex(swiper.activeIndex)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{datesData().map((item, key) => {\n\t\t\t\t\t\t\t\t// console.log(\"games - datesData() - item\", item);\n\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<SwiperSlide\n\t\t\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\tsetSelectedIndex(key);\n\t\t\t\t\t\t\t\t\t\t\tsetSelectedDate(item);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t\t\t\t\t<Col>\n\t\t\t\t\t\t\t\t\t\t\t\t<p className={`${selectedIndex === key ? \"\" : \"text-muted\"} mb-1 py-0 ml-2`}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{item.day}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t\t\t\t\t<Col>\n\t\t\t\t\t\t\t\t\t\t\t\t<Card border=\"secondary\" className=\"mr-1\" style={{ width: \"3rem\", height: \"4rem\" }}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`${\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tselectedIndex === key ? \"text-danger\" : \"text-danger-muted\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} text-center my-1 border-bottom`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.month}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p className={`${selectedIndex === key ? \"\" : \"text-muted\"} text-center my-1`}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.date}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t\t\t</SwiperSlide>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</Swiper>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\n\t\t\t\t{gameCards}\n\t\t\t</Container>\n\t\t</>\n\t);\n}\n\nexport async function getServerSideProps(context) {\n\tconst { req, res } = context;\n\tconst session = await getSession({ req });\n\tlet users = [];\n\tif (session) {\n\t\tusers = await prisma.user.findMany();\n\t\tusers = users\n\t\t\t.map((user) => {\n\t\t\t\tdelete user.password;\n\t\t\t\tdelete user.balance;\n\t\t\t\tdelete user.paypal;\n\t\t\t\tdelete user.emailVerified;\n\t\t\t\tdelete user.createdAt;\n\t\t\t\tdelete user.updatedAt;\n\n\t\t\t\treturn user;\n\t\t\t})\n\t\t\t.filter((user) => {\n\t\t\t\treturn user.id !== session.user.id;\n\t\t\t});\n\t}\n\n\treturn {\n\t\tprops: { query: context.query, users },\n\t};\n}\n"]},"metadata":{},"sourceType":"module"}