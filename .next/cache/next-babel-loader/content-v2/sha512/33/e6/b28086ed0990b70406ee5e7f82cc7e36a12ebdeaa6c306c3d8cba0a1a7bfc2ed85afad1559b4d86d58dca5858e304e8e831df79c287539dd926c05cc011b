{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _toConsumableArray from \"/Users/colechalland/Projects/ChalkCoin/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\n\nvar _jsxFileName = \"/Users/colechalland/Projects/ChalkCoin/pages/blockchain.js\",\n    _s = $RefreshSig$();\n\nimport { useContext, useEffect, useState } from \"react\";\nimport { Container, Row, Col, Alert } from \"react-bootstrap\";\nimport { BlockchainContext } from \"../contexts/Blockchain.Context\";\nimport { UserContext } from \"../contexts/User.Context\";\nimport PendingTransactions from \"../components/Blockchain/PendingTransactions\";\nimport Chain from \"../components/Blockchain/Chain\";\nimport SelectedBlock from \"../components/Blockchain/SelectedBlock\";\nexport default function Blockchain() {\n  _s();\n\n  var currentUser = useContext(UserContext);\n  var blockchain = useContext(BlockchainContext);\n\n  var _useState = useState(blockchain.pendingTransactions),\n      pendingTransactions = _useState[0],\n      setPendingTransactions = _useState[1];\n\n  var _useState2 = useState(false),\n      pendingTransactionsState = _useState2[0],\n      setPendingTransactionsState = _useState2[1];\n\n  var _useState3 = useState([]),\n      blocks = _useState3[0],\n      setBlocks = _useState3[1];\n\n  var _useState4 = useState(false),\n      blocksState = _useState4[0],\n      setBlocksState = _useState4[1];\n\n  var _useState5 = useState(blockchain.selectedBlock),\n      selectedBlock = _useState5[0],\n      setSelectedBlock = _useState5[1];\n\n  var _useState6 = useState(false),\n      selectedBlockState = _useState6[0],\n      setSelectedBlockState = _useState6[1];\n\n  var _useState7 = useState(false),\n      mineState = _useState7[0],\n      setMineState = _useState7[1]; // const blockchainBlocks = [\n  // \t...blockchain.chain.slice(Math.max(blockchain.chain.length - 5, 1)),\n  // ].reverse();\n\n\n  useEffect(function () {\n    setPendingTransactions(blockchain.pendingTransactions);\n  }, [blockchain.pendingTransactions]);\n  useEffect(function () {\n    if (blockchain.initialized) setPendingTransactionsState(true);\n    if (pendingTransactions.length >= 10) setMineState(true);else setMineState(false);\n  }, [pendingTransactions]);\n  useEffect(function () {\n    setBlocks(_toConsumableArray(blockchain.chain).reverse());\n    if (blockchain.chain.length > 0) setBlocksState(true);\n  }, [blockchain.chain]);\n  useEffect(function () {\n    setSelectedBlock(blockchain.selectedBlock);\n    if (blockchain.selectedBlock.hash) setSelectedBlockState(true);\n  }, [blockchain.selectedBlock]);\n  var mineAlert;\n\n  if (mineState) {\n    mineAlert = /*#__PURE__*/_jsxDEV(Alert, {\n      className: \"alert-with-icon\",\n      variant: \"success\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        \"aria-hidden\": true,\n        className: \"close\",\n        \"data-dismiss\": \"alert\",\n        type: \"button\",\n        onClick: function onClick() {\n          setMineState(false);\n        },\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"nc-icon nc-simple-remove\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        \"data-notify\": \"icon\",\n        className: \"nc-icon nc-bell-55\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        \"data-notify\": \"message\",\n        children: \"There's enough pending transactions to be mined.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 4\n    }, this);\n  } // console.log(\"blockchain\", blockchain);\n  // console.log(\"pending transactions\", pendingTransactions);\n  // console.log(\"blockchain blocks\", blockchainBlocks);\n  // console.log(\"selectedBlock\", selectedBlock);\n\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    fluid: true,\n    children: [/*#__PURE__*/_jsxDEV(Row, {\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        children: mineAlert\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(PendingTransactions, {\n      pendingTransactions: pendingTransactions,\n      mineState: mineState,\n      currentUser: currentUser,\n      loaded: pendingTransactionsState\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Chain, {\n      blocks: blocks,\n      selectedBlock: selectedBlock,\n      loaded: blocksState\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(SelectedBlock, {\n      selectedBlock: selectedBlock,\n      currentUser: currentUser,\n      loaded: selectedBlockState\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 3\n  }, this);\n}\n\n_s(Blockchain, \"lgmrjYBRPi9zCKBs8xT0P5zXWLs=\");\n\n_c = Blockchain;\n\nvar _c;\n\n$RefreshReg$(_c, \"Blockchain\");","map":{"version":3,"sources":["/Users/colechalland/Projects/ChalkCoin/pages/blockchain.js"],"names":["useContext","useEffect","useState","Container","Row","Col","Alert","BlockchainContext","UserContext","PendingTransactions","Chain","SelectedBlock","Blockchain","currentUser","blockchain","pendingTransactions","setPendingTransactions","pendingTransactionsState","setPendingTransactionsState","blocks","setBlocks","blocksState","setBlocksState","selectedBlock","setSelectedBlock","selectedBlockState","setSelectedBlockState","mineState","setMineState","initialized","length","chain","reverse","hash","mineAlert"],"mappings":"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","sourcesContent":["import { useContext, useEffect, useState } from \"react\";\nimport { Container, Row, Col, Alert } from \"react-bootstrap\";\nimport { BlockchainContext } from \"../contexts/Blockchain.Context\";\nimport { UserContext } from \"../contexts/User.Context\";\nimport PendingTransactions from \"../components/Blockchain/PendingTransactions\";\nimport Chain from \"../components/Blockchain/Chain\";\nimport SelectedBlock from \"../components/Blockchain/SelectedBlock\";\n\nexport default function Blockchain() {\n\tconst currentUser = useContext(UserContext);\n\tconst blockchain = useContext(BlockchainContext);\n\tconst [pendingTransactions, setPendingTransactions] = useState(blockchain.pendingTransactions);\n\tconst [pendingTransactionsState, setPendingTransactionsState] = useState(false);\n\tconst [blocks, setBlocks] = useState([]);\n\tconst [blocksState, setBlocksState] = useState(false);\n\tconst [selectedBlock, setSelectedBlock] = useState(blockchain.selectedBlock);\n\tconst [selectedBlockState, setSelectedBlockState] = useState(false);\n\tconst [mineState, setMineState] = useState(false);\n\t// const blockchainBlocks = [\n\t// \t...blockchain.chain.slice(Math.max(blockchain.chain.length - 5, 1)),\n\t// ].reverse();\n\n\tuseEffect(() => {\n\t\tsetPendingTransactions(blockchain.pendingTransactions);\n\t}, [blockchain.pendingTransactions]);\n\n\tuseEffect(() => {\n\t\tif (blockchain.initialized) setPendingTransactionsState(true);\n\t\tif (pendingTransactions.length >= 10) setMineState(true);\n\t\telse setMineState(false);\n\t}, [pendingTransactions]);\n\n\tuseEffect(() => {\n\t\tsetBlocks([...blockchain.chain].reverse());\n\t\tif (blockchain.chain.length > 0) setBlocksState(true);\n\t}, [blockchain.chain]);\n\n\tuseEffect(() => {\n\t\tsetSelectedBlock(blockchain.selectedBlock);\n\t\tif (blockchain.selectedBlock.hash) setSelectedBlockState(true);\n\t}, [blockchain.selectedBlock]);\n\n\tlet mineAlert;\n\tif (mineState) {\n\t\tmineAlert = (\n\t\t\t<Alert className=\"alert-with-icon\" variant=\"success\">\n\t\t\t\t<button\n\t\t\t\t\taria-hidden={true}\n\t\t\t\t\tclassName=\"close\"\n\t\t\t\t\tdata-dismiss=\"alert\"\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tsetMineState(false);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<i className=\"nc-icon nc-simple-remove\"></i>\n\t\t\t\t</button>\n\t\t\t\t<span data-notify=\"icon\" className=\"nc-icon nc-bell-55\"></span>\n\t\t\t\t<span data-notify=\"message\">{\"There's enough pending transactions to be mined.\"}</span>\n\t\t\t</Alert>\n\t\t);\n\t}\n\n\t// console.log(\"blockchain\", blockchain);\n\t// console.log(\"pending transactions\", pendingTransactions);\n\t// console.log(\"blockchain blocks\", blockchainBlocks);\n\t// console.log(\"selectedBlock\", selectedBlock);\n\n\treturn (\n\t\t<Container fluid>\n\t\t\t<Row>\n\t\t\t\t<Col>{mineAlert}</Col>\n\t\t\t</Row>\n\t\t\t<PendingTransactions\n\t\t\t\tpendingTransactions={pendingTransactions}\n\t\t\t\tmineState={mineState}\n\t\t\t\tcurrentUser={currentUser}\n\t\t\t\tloaded={pendingTransactionsState}\n\t\t\t/>\n\t\t\t<Chain blocks={blocks} selectedBlock={selectedBlock} loaded={blocksState} />\n\t\t\t<SelectedBlock selectedBlock={selectedBlock} currentUser={currentUser} loaded={selectedBlockState} />\n\t\t</Container>\n\t);\n}\n"]},"metadata":{},"sourceType":"module"}