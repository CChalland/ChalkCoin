{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/Users/colechalland/Projects/ChalkCoin/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _defineProperty from \"/Users/colechalland/Projects/ChalkCoin/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"/Users/colechalland/Projects/ChalkCoin/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/Users/colechalland/Projects/ChalkCoin/contexts/Sports.Context.js\",\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { createContext, useContext, useCallback, useReducer, useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport sportsReducer from \"../reducers/Sports.Reducer\";\nexport var SportContext = /*#__PURE__*/createContext();\nexport var SportDispatch = /*#__PURE__*/createContext();\nvar initialSportsData = [{\n  id: 1,\n  abbrv: \"NCAAF\",\n  sport: \"football\",\n  display_name: \"NCAA Football\",\n  league_name: \"college-football\",\n  data: {\n    days: []\n  },\n  reload: false,\n  path: \"/games?sport=ncaaf\",\n  name: \"Football\",\n  image: \"../../static/media/sports-icons/1.png\",\n  mini: \"NCAAB\"\n}, {\n  id: 2,\n  abbrv: \"NFL\",\n  sport: \"football\",\n  display_name: \"NFL\",\n  league_name: \"nfl\",\n  data: {\n    days: []\n  },\n  reload: false,\n  path: \"/games?sport=nfl\",\n  name: \"NFL\",\n  image: \"../../static/media/sports-icons/2.png\",\n  mini: \"NFL\"\n}, {\n  id: 3,\n  abbrv: \"MLB\",\n  sport: \"baseball\",\n  display_name: \"MLB\",\n  league_name: \"mlb\",\n  data: {\n    days: []\n  },\n  reload: false,\n  path: \"/games?sport=mlb\",\n  name: \"MLB\",\n  image: \"../../static/media/sports-icons/3.png\",\n  mini: \"../../static/media/sports-icons/3.png\"\n}, {\n  id: 4,\n  abbrv: \"NBA\",\n  sport: \"basketball\",\n  display_name: \"NBA\",\n  league_name: \"nba\",\n  data: {\n    days: []\n  },\n  reload: false,\n  path: \"/games?sport=nba\",\n  name: \"NBA\",\n  image: \"../../static/media/sports-icons/4.png\",\n  mini: \"../../static/media/sports-icons/4.png\"\n}, // {\n// \tid: 5,\n// \tabbrv: \"NCAAB\",\n// \tsport: \"basketball\",\n// \tdisplay_name: \"NCAA Men's Basketball\",\n// \tleague_name: \"mens-college-basketball\",\n// \tdata: {days: []},\n// \treload: false,\n// \tpath: \"/games?sport=ncaab\",\n// \tname: \"Basketball\",\n// \timage: \"../../static/media/sports-icons/5.png\",\n// \tmini: \"../../static/media/sports-icons/5.png\",\n// },\n{\n  id: 6,\n  abbrv: \"NHL\",\n  sport: \"hockey\",\n  display_name: \"NHL\",\n  league_name: \"nhl\",\n  data: {\n    days: []\n  },\n  reload: false,\n  path: \"/games?sport=nhl\",\n  name: \"NHL\",\n  image: \"../../static/media/sports-icons/6.png\",\n  mini: \"../../static/media/sports-icons/6.png\"\n}, {\n  id: 8,\n  abbrv: \"WNBA\",\n  sport: \"basketball\",\n  display_name: \"WNBA\",\n  league_name: \"wnba\",\n  data: {\n    days: []\n  },\n  reload: false,\n  path: \"/games?sport=wnba\",\n  name: \"WNBA\",\n  image: \"../../static/media/sports-icons/8.png\",\n  mini: \"../../static/media/sports-icons/8.png\"\n} // { id: 10, abbrv: \"MLS\", sport: \"soccer\", display_name: \"MLS\", league_name: \"MLS\", data: {days: []}, reload: false },\n];\nexport function SportProvider(props) {\n  _s();\n\n  var _useReducer = useReducer(sportsReducer, initialSportsData),\n      sportsData = _useReducer[0],\n      dispatch = _useReducer[1];\n\n  var getData = useCallback( /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(league) {\n      var preGames, inGames, postGames, leagueData, sortedGames;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              sortedGames = [];\n\n              if (league.reload) {\n                axios.get(\"http://site.api.espn.com/apis/site/v2/sports/\".concat(league.sport, \"/\").concat(league.league_name, \"/scoreboard\")).then(function (response) {\n                  leagueData = response.data;\n                  inGames = response.data.events.filter(function (game) {\n                    league.reload = true;\n                    return game.status.type.state === \"in\";\n                  });\n                  postGames = response.data.events.filter(function (game) {\n                    return game.status.type.state === \"post\";\n                  });\n                  preGames = response.data.events.filter(function (game) {\n                    return game.status.type.state === \"pre\";\n                  });\n                  if (inGames.length === 0) league.reload = false;\n                  sortedGames.push(preGames, inGames, postGames);\n                  leagueData.events = sortedGames.flat();\n                  dispatch({\n                    type: league.display_name,\n                    data: _objectSpread(_objectSpread({}, leagueData), {}, {\n                      days: league.days\n                    }),\n                    reload: league.reload\n                  }); // console.log(sortedGames.flat());\n                });\n              } // console.log(\"getData - league\", league);\n\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }());\n  useEffect(function () {\n    var timeOut = setTimeout(function () {\n      try {\n        sportsData.map( /*#__PURE__*/function () {\n          var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(league) {\n            return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n              while (1) {\n                switch (_context2.prev = _context2.next) {\n                  case 0:\n                    getData(league);\n\n                  case 1:\n                  case \"end\":\n                    return _context2.stop();\n                }\n              }\n            }, _callee2);\n          }));\n\n          return function (_x2) {\n            return _ref2.apply(this, arguments);\n          };\n        }());\n      } catch (err) {\n        console.log(err.message);\n      }\n    }, 15000);\n    return function () {\n      clearTimeout(timeOut);\n    };\n  });\n  useEffect(function () {\n    function getSportsData() {\n      return _getSportsData.apply(this, arguments);\n    }\n\n    function _getSportsData() {\n      _getSportsData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        var _this = this;\n\n        var removeSportsData, sportData;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                removeSportsData = [];\n                sportData = sportsData;\n                _context4.prev = 2;\n                _context4.next = 5;\n                return Promise.all(sportData.map( /*#__PURE__*/function () {\n                  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(league) {\n                    var leagueData, sortedGames, reloadData;\n                    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n                      while (1) {\n                        switch (_context3.prev = _context3.next) {\n                          case 0:\n                            _context3.next = 2;\n                            return axios({\n                              method: \"GET\",\n                              url: \"http://site.api.espn.com/apis/site/v2/sports/\".concat(league.sport, \"/\").concat(league.league_name, \"/scoreboard\")\n                            }).then(function (response) {\n                              if (response.data.events.length === 0) {\n                                removeSportsData.push(league);\n                              } else {\n                                leagueData = response.data;\n                                sortedGames = response.data.events.filter(function (game) {\n                                  reloadData = true;\n                                  return game.status.type.state === \"in\";\n                                });\n                                sortedGames.push(response.data.events.filter(function (game) {\n                                  if (sortedGames.length === 0) reloadData = false;\n                                  return game.status.type.state === \"post\";\n                                }));\n                                sortedGames.push(response.data.events.filter(function (game) {\n                                  return game.status.type.state === \"pre\";\n                                }));\n                                leagueData.events = sortedGames.flat();\n                              }\n                            }.bind(_this));\n\n                          case 2:\n                            return _context3.abrupt(\"return\", _objectSpread(_objectSpread({}, league), {}, {\n                              data: _objectSpread(_objectSpread({}, leagueData), {}, {\n                                days: []\n                              }),\n                              reload: reloadData\n                            }));\n\n                          case 3:\n                          case \"end\":\n                            return _context3.stop();\n                        }\n                      }\n                    }, _callee3);\n                  }));\n\n                  return function (_x3) {\n                    return _ref3.apply(this, arguments);\n                  };\n                }()));\n\n              case 5:\n                sportData = _context4.sent;\n                _context4.next = 11;\n                break;\n\n              case 8:\n                _context4.prev = 8;\n                _context4.t0 = _context4[\"catch\"](2);\n                console.log(_context4.t0.message);\n\n              case 11:\n                dispatch({\n                  type: \"ALL\",\n                  data: sportData\n                });\n\n              case 12:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[2, 8]]);\n      }));\n      return _getSportsData.apply(this, arguments);\n    }\n\n    getSportsData();\n  }, []); // console.log(\"SportsContext - sportsData\", sportsData);\n\n  return /*#__PURE__*/_jsxDEV(SportContext.Provider, {\n    value: sportsData,\n    children: /*#__PURE__*/_jsxDEV(SportDispatch.Provider, {\n      value: dispatch,\n      children: props.children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 211,\n    columnNumber: 3\n  }, this);\n}\n\n_s(SportProvider, \"XYWiwNwzV6MRBgr9xr4tUS9gQE4=\");\n\n_c = SportProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"SportProvider\");","map":{"version":3,"sources":["/Users/colechalland/Projects/ChalkCoin/contexts/Sports.Context.js"],"names":["createContext","useContext","useCallback","useReducer","useEffect","useState","axios","sportsReducer","SportContext","SportDispatch","initialSportsData","id","abbrv","sport","display_name","league_name","data","days","reload","path","name","image","mini","SportProvider","props","sportsData","dispatch","getData","league","sortedGames","get","then","response","leagueData","inGames","events","filter","game","status","type","state","postGames","preGames","length","push","flat","timeOut","setTimeout","map","err","console","log","message","clearTimeout","getSportsData","removeSportsData","sportData","Promise","all","method","url","reloadData","bind","children"],"mappings":"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","sourcesContent":["import { createContext, useContext, useCallback, useReducer, useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport sportsReducer from \"../reducers/Sports.Reducer\";\n\nexport const SportContext = createContext();\nexport const SportDispatch = createContext();\nlet initialSportsData = [\n\t{\n\t\tid: 1,\n\t\tabbrv: \"NCAAF\",\n\t\tsport: \"football\",\n\t\tdisplay_name: \"NCAA Football\",\n\t\tleague_name: \"college-football\",\n\t\tdata: { days: [] },\n\t\treload: false,\n\t\tpath: \"/games?sport=ncaaf\",\n\t\tname: \"Football\",\n\t\timage: \"../../static/media/sports-icons/1.png\",\n\t\tmini: \"NCAAB\",\n\t},\n\t{\n\t\tid: 2,\n\t\tabbrv: \"NFL\",\n\t\tsport: \"football\",\n\t\tdisplay_name: \"NFL\",\n\t\tleague_name: \"nfl\",\n\t\tdata: { days: [] },\n\t\treload: false,\n\t\tpath: \"/games?sport=nfl\",\n\t\tname: \"NFL\",\n\t\timage: \"../../static/media/sports-icons/2.png\",\n\t\tmini: \"NFL\",\n\t},\n\t{\n\t\tid: 3,\n\t\tabbrv: \"MLB\",\n\t\tsport: \"baseball\",\n\t\tdisplay_name: \"MLB\",\n\t\tleague_name: \"mlb\",\n\t\tdata: { days: [] },\n\t\treload: false,\n\t\tpath: \"/games?sport=mlb\",\n\t\tname: \"MLB\",\n\t\timage: \"../../static/media/sports-icons/3.png\",\n\t\tmini: \"../../static/media/sports-icons/3.png\",\n\t},\n\t{\n\t\tid: 4,\n\t\tabbrv: \"NBA\",\n\t\tsport: \"basketball\",\n\t\tdisplay_name: \"NBA\",\n\t\tleague_name: \"nba\",\n\t\tdata: { days: [] },\n\t\treload: false,\n\t\tpath: \"/games?sport=nba\",\n\t\tname: \"NBA\",\n\t\timage: \"../../static/media/sports-icons/4.png\",\n\t\tmini: \"../../static/media/sports-icons/4.png\",\n\t},\n\t// {\n\t// \tid: 5,\n\t// \tabbrv: \"NCAAB\",\n\t// \tsport: \"basketball\",\n\t// \tdisplay_name: \"NCAA Men's Basketball\",\n\t// \tleague_name: \"mens-college-basketball\",\n\t// \tdata: {days: []},\n\t// \treload: false,\n\t// \tpath: \"/games?sport=ncaab\",\n\t// \tname: \"Basketball\",\n\t// \timage: \"../../static/media/sports-icons/5.png\",\n\t// \tmini: \"../../static/media/sports-icons/5.png\",\n\t// },\n\t{\n\t\tid: 6,\n\t\tabbrv: \"NHL\",\n\t\tsport: \"hockey\",\n\t\tdisplay_name: \"NHL\",\n\t\tleague_name: \"nhl\",\n\t\tdata: { days: [] },\n\t\treload: false,\n\t\tpath: \"/games?sport=nhl\",\n\t\tname: \"NHL\",\n\t\timage: \"../../static/media/sports-icons/6.png\",\n\t\tmini: \"../../static/media/sports-icons/6.png\",\n\t},\n\t{\n\t\tid: 8,\n\t\tabbrv: \"WNBA\",\n\t\tsport: \"basketball\",\n\t\tdisplay_name: \"WNBA\",\n\t\tleague_name: \"wnba\",\n\t\tdata: { days: [] },\n\t\treload: false,\n\t\tpath: \"/games?sport=wnba\",\n\t\tname: \"WNBA\",\n\t\timage: \"../../static/media/sports-icons/8.png\",\n\t\tmini: \"../../static/media/sports-icons/8.png\",\n\t},\n\t// { id: 10, abbrv: \"MLS\", sport: \"soccer\", display_name: \"MLS\", league_name: \"MLS\", data: {days: []}, reload: false },\n];\n\nexport function SportProvider(props) {\n\tconst [sportsData, dispatch] = useReducer(sportsReducer, initialSportsData);\n\n\tconst getData = useCallback(async (league) => {\n\t\tlet preGames,\n\t\t\tinGames,\n\t\t\tpostGames,\n\t\t\tleagueData,\n\t\t\tsortedGames = [];\n\n\t\tif (league.reload) {\n\t\t\taxios\n\t\t\t\t.get(`http://site.api.espn.com/apis/site/v2/sports/${league.sport}/${league.league_name}/scoreboard`)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tleagueData = response.data;\n\t\t\t\t\tinGames = response.data.events.filter((game) => {\n\t\t\t\t\t\tleague.reload = true;\n\t\t\t\t\t\treturn game.status.type.state === \"in\";\n\t\t\t\t\t});\n\t\t\t\t\tpostGames = response.data.events.filter((game) => {\n\t\t\t\t\t\treturn game.status.type.state === \"post\";\n\t\t\t\t\t});\n\t\t\t\t\tpreGames = response.data.events.filter((game) => {\n\t\t\t\t\t\treturn game.status.type.state === \"pre\";\n\t\t\t\t\t});\n\n\t\t\t\t\tif (inGames.length === 0) league.reload = false;\n\t\t\t\t\tsortedGames.push(preGames, inGames, postGames);\n\t\t\t\t\tleagueData.events = sortedGames.flat();\n\t\t\t\t\tdispatch({\n\t\t\t\t\t\ttype: league.display_name,\n\t\t\t\t\t\tdata: { ...leagueData, days: league.days },\n\t\t\t\t\t\treload: league.reload,\n\t\t\t\t\t});\n\n\t\t\t\t\t// console.log(sortedGames.flat());\n\t\t\t\t});\n\t\t}\n\t\t// console.log(\"getData - league\", league);\n\t});\n\n\tuseEffect(() => {\n\t\tconst timeOut = setTimeout(() => {\n\t\t\ttry {\n\t\t\t\tsportsData.map(async (league) => {\n\t\t\t\t\tgetData(league);\n\t\t\t\t});\n\t\t\t} catch (err) {\n\t\t\t\tconsole.log(err.message);\n\t\t\t}\n\t\t}, 15000);\n\n\t\treturn () => {\n\t\t\tclearTimeout(timeOut);\n\t\t};\n\t});\n\n\tuseEffect(() => {\n\t\tasync function getSportsData() {\n\t\t\tlet removeSportsData = [];\n\t\t\tlet sportData = sportsData;\n\n\t\t\ttry {\n\t\t\t\tsportData = await Promise.all(\n\t\t\t\t\tsportData.map(async (league) => {\n\t\t\t\t\t\tlet leagueData, sortedGames, reloadData;\n\n\t\t\t\t\t\tawait axios({\n\t\t\t\t\t\t\tmethod: \"GET\",\n\t\t\t\t\t\t\turl: `http://site.api.espn.com/apis/site/v2/sports/${league.sport}/${league.league_name}/scoreboard`,\n\t\t\t\t\t\t}).then(\n\t\t\t\t\t\t\tfunction (response) {\n\t\t\t\t\t\t\t\tif (response.data.events.length === 0) {\n\t\t\t\t\t\t\t\t\tremoveSportsData.push(league);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tleagueData = response.data;\n\t\t\t\t\t\t\t\t\tsortedGames = response.data.events.filter((game) => {\n\t\t\t\t\t\t\t\t\t\treloadData = true;\n\t\t\t\t\t\t\t\t\t\treturn game.status.type.state === \"in\";\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tsortedGames.push(\n\t\t\t\t\t\t\t\t\t\tresponse.data.events.filter((game) => {\n\t\t\t\t\t\t\t\t\t\t\tif (sortedGames.length === 0) reloadData = false;\n\t\t\t\t\t\t\t\t\t\t\treturn game.status.type.state === \"post\";\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tsortedGames.push(\n\t\t\t\t\t\t\t\t\t\tresponse.data.events.filter((game) => {\n\t\t\t\t\t\t\t\t\t\t\treturn game.status.type.state === \"pre\";\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tleagueData.events = sortedGames.flat();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}.bind(this)\n\t\t\t\t\t\t);\n\t\t\t\t\t\treturn { ...league, data: { ...leagueData, days: [] }, reload: reloadData };\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t} catch (err) {\n\t\t\t\tconsole.log(err.message);\n\t\t\t}\n\t\t\tdispatch({ type: \"ALL\", data: sportData });\n\t\t}\n\t\tgetSportsData();\n\t}, []);\n\n\t// console.log(\"SportsContext - sportsData\", sportsData);\n\n\treturn (\n\t\t<SportContext.Provider value={sportsData}>\n\t\t\t<SportDispatch.Provider value={dispatch}>{props.children}</SportDispatch.Provider>\n\t\t</SportContext.Provider>\n\t);\n}\n"]},"metadata":{},"sourceType":"module"}