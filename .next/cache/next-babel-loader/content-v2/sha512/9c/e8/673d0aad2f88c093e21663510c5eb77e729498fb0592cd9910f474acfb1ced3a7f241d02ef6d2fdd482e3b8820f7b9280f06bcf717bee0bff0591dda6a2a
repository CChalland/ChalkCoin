{"ast":null,"code":"import prisma from \"../../contexts/prisma\";\nimport { getSession } from \"next-auth/client\";\nimport { hashSync } from \"bcrypt\";\nexport default (async (req, res) => {\n  const session = await getSession({\n    req\n  });\n\n  if (req.method === \"GET\") {\n    const user = await prisma.user.findUnique({\n      where: {\n        id: session.user.id\n      },\n      include: {\n        requester: true,\n        accepter: true\n      }\n    });\n    return res.json(user);\n  } else if (req.method === \"POST\") {\n    const user = req.body;\n    delete user.balance;\n    if (user.password) user.password = hashSync(user.password, 10);\n    const updatedUser = await prisma.user.update({\n      where: {\n        id: session.user.id\n      },\n      data: user\n    });\n    console.log(updatedUser);\n    return res.json(updatedUser);\n  }\n});","map":{"version":3,"sources":["/Users/colechalland/Projects/CryptoCurrency/BEToken/pages/api/currentUser.js"],"names":["prisma","getSession","hashSync","req","res","session","method","user","findUnique","where","id","include","requester","accepter","json","body","balance","password","updatedUser","update","data","console","log"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,uBAAnB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,QAAT,QAAyB,QAAzB;AAEA,gBAAe,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAClC,QAAMC,OAAO,GAAG,MAAMJ,UAAU,CAAC;AAAEE,IAAAA;AAAF,GAAD,CAAhC;;AAEA,MAAIA,GAAG,CAACG,MAAJ,KAAe,KAAnB,EAA0B;AACzB,UAAMC,IAAI,GAAG,MAAMP,MAAM,CAACO,IAAP,CAAYC,UAAZ,CAAuB;AACzCC,MAAAA,KAAK,EAAE;AACNC,QAAAA,EAAE,EAAEL,OAAO,CAACE,IAAR,CAAaG;AADX,OADkC;AAIzCC,MAAAA,OAAO,EAAE;AACRC,QAAAA,SAAS,EAAE,IADH;AAERC,QAAAA,QAAQ,EAAE;AAFF;AAJgC,KAAvB,CAAnB;AASA,WAAOT,GAAG,CAACU,IAAJ,CAASP,IAAT,CAAP;AACA,GAXD,MAWO,IAAIJ,GAAG,CAACG,MAAJ,KAAe,MAAnB,EAA2B;AACjC,UAAMC,IAAI,GAAGJ,GAAG,CAACY,IAAjB;AACA,WAAOR,IAAI,CAACS,OAAZ;AACA,QAAIT,IAAI,CAACU,QAAT,EAAmBV,IAAI,CAACU,QAAL,GAAgBf,QAAQ,CAACK,IAAI,CAACU,QAAN,EAAgB,EAAhB,CAAxB;AAEnB,UAAMC,WAAW,GAAG,MAAMlB,MAAM,CAACO,IAAP,CAAYY,MAAZ,CAAmB;AAC5CV,MAAAA,KAAK,EAAE;AACNC,QAAAA,EAAE,EAAEL,OAAO,CAACE,IAAR,CAAaG;AADX,OADqC;AAI5CU,MAAAA,IAAI,EAAEb;AAJsC,KAAnB,CAA1B;AAMAc,IAAAA,OAAO,CAACC,GAAR,CAAYJ,WAAZ;AACA,WAAOd,GAAG,CAACU,IAAJ,CAASI,WAAT,CAAP;AACA;AACD,CA5BD","sourcesContent":["import prisma from \"../../contexts/prisma\";\nimport { getSession } from \"next-auth/client\";\nimport { hashSync } from \"bcrypt\";\n\nexport default async (req, res) => {\n\tconst session = await getSession({ req });\n\n\tif (req.method === \"GET\") {\n\t\tconst user = await prisma.user.findUnique({\n\t\t\twhere: {\n\t\t\t\tid: session.user.id,\n\t\t\t},\n\t\t\tinclude: {\n\t\t\t\trequester: true,\n\t\t\t\taccepter: true,\n\t\t\t},\n\t\t});\n\t\treturn res.json(user);\n\t} else if (req.method === \"POST\") {\n\t\tconst user = req.body;\n\t\tdelete user.balance;\n\t\tif (user.password) user.password = hashSync(user.password, 10);\n\n\t\tconst updatedUser = await prisma.user.update({\n\t\t\twhere: {\n\t\t\t\tid: session.user.id,\n\t\t\t},\n\t\t\tdata: user,\n\t\t});\n\t\tconsole.log(updatedUser);\n\t\treturn res.json(updatedUser);\n\t}\n};\n"]},"metadata":{},"sourceType":"module"}